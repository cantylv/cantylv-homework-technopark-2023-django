"use strict";(()=>{var hi=Object.create;var ct=Object.defineProperty;var di=Object.getOwnPropertyDescriptor;var pi=Object.getOwnPropertyNames;var yi=Object.getPrototypeOf,mi=Object.prototype.hasOwnProperty;var d=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),_i=(r,t)=>{for(var e in t)ct(r,e,{get:t[e],enumerable:!0})},gi=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of pi(t))!mi.call(r,i)&&i!==e&&ct(r,i,{get:()=>t[i],enumerable:!(n=di(t,i))||n.enumerable});return r};var lt=(r,t,e)=>(e=r!=null?hi(yi(r)):{},gi(t||!r||!r.__esModule?ct(e,"default",{value:r,enumerable:!0}):e,r));var ht=d((Os,ft)=>{"use strict";var le=typeof Reflect=="object"?Reflect:null,ln=le&&typeof le.apply=="function"?le.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},De;le&&typeof le.ownKeys=="function"?De=le.ownKeys:Object.getOwnPropertySymbols?De=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:De=function(t){return Object.getOwnPropertyNames(t)};function bi(r){console&&console.warn&&console.warn(r)}var hn=Number.isNaN||function(t){return t!==t};function x(){x.init.call(this)}ft.exports=x;ft.exports.once=xi;x.EventEmitter=x;x.prototype._events=void 0;x.prototype._eventsCount=0;x.prototype._maxListeners=void 0;var fn=10;function Le(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return fn},set:function(r){if(typeof r!="number"||r<0||hn(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");fn=r}});x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};x.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||hn(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function dn(r){return r._maxListeners===void 0?x.defaultMaxListeners:r._maxListeners}x.prototype.getMaxListeners=function(){return dn(this)};x.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")ln(u,this,e);else for(var c=u.length,l=gn(u,c),n=0;n<c;++n)ln(l[n],this,e);return!0};function pn(r,t,e,n){var i,s,o;if(Le(e),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),s=r._events),o=s[t]),o===void 0)o=s[t]=e,++r._eventsCount;else if(typeof o=="function"?o=s[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),i=dn(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=t,a.count=o.length,bi(a)}return r}x.prototype.addListener=function(t,e){return pn(this,t,e,!1)};x.prototype.on=x.prototype.addListener;x.prototype.prependListener=function(t,e){return pn(this,t,e,!0)};function vi(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yn(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},i=vi.bind(n);return i.listener=e,n.wrapFn=i,i}x.prototype.once=function(t,e){return Le(e),this.on(t,yn(this,t,e)),this};x.prototype.prependOnceListener=function(t,e){return Le(e),this.prependListener(t,yn(this,t,e)),this};x.prototype.removeListener=function(t,e){var n,i,s,o,a;if(Le(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():wi(n,s),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};x.prototype.off=x.prototype.removeListener;x.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function mn(r,t,e){var n=r._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?Si(i):gn(i,i.length)}x.prototype.listeners=function(t){return mn(this,t,!0)};x.prototype.rawListeners=function(t){return mn(this,t,!1)};x.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):_n.call(r,t)};x.prototype.listenerCount=_n;function _n(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?De(this._events):[]};function gn(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function wi(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function Si(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function xi(r,t){return new Promise(function(e,n){function i(o){r.removeListener(t,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),e([].slice.call(arguments))}bn(r,t,s,{once:!0}),t!=="error"&&Oi(r,i,{once:!0})})}function Oi(r,t,e){typeof r.on=="function"&&bn(r,"error",t,e)}function bn(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function i(s){n.once&&r.removeEventListener(t,i),e(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var pt=d((So,En)=>{"use strict";En.exports=Pi;function Pi(r,t){for(var e=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)e[n++]=arguments[i++];return new Promise(function(a,u){e[n]=function(l){if(s)if(s=!1,l)u(l);else{for(var m=new Array(arguments.length-1),w=0;w<m.length;)m[w++]=arguments[w];a.apply(null,m)}};try{r.apply(t||null,e)}catch(c){s&&(s=!1,u(c))}})}});var Cn=d(Rn=>{"use strict";var Ue=Rn;Ue.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&t.charAt(e)==="=";)++n;return Math.ceil(t.length*3)/4-n};var de=new Array(64),kn=new Array(123);for(J=0;J<64;)kn[de[J]=J<26?J+65:J<52?J+71:J<62?J-4:J-59|43]=J++;var J;Ue.encode=function(t,e,n){for(var i=null,s=[],o=0,a=0,u;e<n;){var c=t[e++];switch(a){case 0:s[o++]=de[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=de[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=de[u|c>>6],s[o++]=de[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=de[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Tn="invalid encoding";Ue.decode=function(t,e,n){for(var i=n,s=0,o,a=0;a<t.length;){var u=t.charCodeAt(a++);if(u===61&&s>1)break;if((u=kn[u])===void 0)throw Error(Tn);switch(s){case 0:o=u,s=1;break;case 1:e[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:e[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:e[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(Tn);return n-i};Ue.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var An=d((Oo,Pn)=>{"use strict";Pn.exports=ze;function ze(){this._listeners={}}ze.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this};ze.prototype.off=function(t,e){if(t===void 0)this._listeners={};else if(e===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===e?n.splice(i,1):++i;return this};ze.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<e.length;)e[i].fn.apply(e[i++].ctx,n)}return this}});var Bn=d((Eo,jn)=>{"use strict";jn.exports=qn(qn);function qn(r){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),n=e[3]===128;function i(u,c,l){t[0]=u,c[l]=e[0],c[l+1]=e[1],c[l+2]=e[2],c[l+3]=e[3]}function s(u,c,l){t[0]=u,c[l]=e[3],c[l+1]=e[2],c[l+2]=e[1],c[l+3]=e[0]}r.writeFloatLE=n?i:s,r.writeFloatBE=n?s:i;function o(u,c){return e[0]=u[c],e[1]=u[c+1],e[2]=u[c+2],e[3]=u[c+3],t[0]}function a(u,c){return e[3]=u[c],e[2]=u[c+1],e[1]=u[c+2],e[0]=u[c+3],t[0]}r.readFloatLE=n?o:a,r.readFloatBE=n?a:o}():function(){function t(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}r.writeFloatLE=t.bind(null,Dn),r.writeFloatBE=t.bind(null,Ln);function e(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}r.readFloatLE=e.bind(null,Nn),r.readFloatBE=e.bind(null,In)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),n=e[7]===128;function i(u,c,l){t[0]=u,c[l]=e[0],c[l+1]=e[1],c[l+2]=e[2],c[l+3]=e[3],c[l+4]=e[4],c[l+5]=e[5],c[l+6]=e[6],c[l+7]=e[7]}function s(u,c,l){t[0]=u,c[l]=e[7],c[l+1]=e[6],c[l+2]=e[5],c[l+3]=e[4],c[l+4]=e[3],c[l+5]=e[2],c[l+6]=e[1],c[l+7]=e[0]}r.writeDoubleLE=n?i:s,r.writeDoubleBE=n?s:i;function o(u,c){return e[0]=u[c],e[1]=u[c+1],e[2]=u[c+2],e[3]=u[c+3],e[4]=u[c+4],e[5]=u[c+5],e[6]=u[c+6],e[7]=u[c+7],t[0]}function a(u,c){return e[7]=u[c],e[6]=u[c+1],e[5]=u[c+2],e[4]=u[c+3],e[3]=u[c+4],e[2]=u[c+5],e[1]=u[c+6],e[0]=u[c+7],t[0]}r.readDoubleLE=n?o:a,r.readDoubleBE=n?a:o}():function(){function t(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var l;if(o<22250738585072014e-324)l=o/5e-324,n(l>>>0,a,u+i),n((c<<31|l/4294967296)>>>0,a,u+s);else{var m=Math.floor(Math.log(o)/Math.LN2);m===1024&&(m=1023),l=o*Math.pow(2,-m),n(l*4503599627370496>>>0,a,u+i),n((c<<31|m+1023<<20|l*1048576&1048575)>>>0,a,u+s)}}}r.writeDoubleLE=t.bind(null,Dn,0,4),r.writeDoubleBE=t.bind(null,Ln,4,0);function e(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),l=(c>>31)*2+1,m=c>>>20&2047,w=4294967296*(c&1048575)+u;return m===2047?w?NaN:l*(1/0):m===0?l*5e-324*w:l*Math.pow(2,m-1075)*(w+4503599627370496)}r.readDoubleLE=e.bind(null,Nn,0,4),r.readDoubleBE=e.bind(null,In,4,0)}(),r}function Dn(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}function Ln(r,t,e){t[e]=r>>>24,t[e+1]=r>>>16&255,t[e+2]=r>>>8&255,t[e+3]=r&255}function Nn(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16|r[t+3]<<24)>>>0}function In(r,t){return(r[t]<<24|r[t+1]<<16|r[t+2]<<8|r[t+3])>>>0}});var yt=d((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}});var Jn=d(Fn=>{"use strict";var mt=Fn;mt.length=function(t){for(var e=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,e+=4):e+=3;return e};mt.read=function(t,e,n){var i=n-e;if(i<1)return"";for(var s=null,o=[],a=0,u;e<n;)u=t[e++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|t[e++]&63:u>239&&u<365?(u=((u&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};mt.write=function(t,e,n){for(var i=n,s,o,a=0;a<t.length;++a)s=t.charCodeAt(a),s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&((o=t.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128);return n-i}});var Un=d((ko,Mn)=>{"use strict";Mn.exports=Ai;function Ai(r,t,e){var n=e||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return r(u);o+u>n&&(s=r(n),o=0);var c=t.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var Wn=d((Ro,zn)=>{"use strict";zn.exports=C;var we=$();function C(r,t){this.lo=r>>>0,this.hi=t>>>0}var se=C.zero=new C(0,0);se.toNumber=function(){return 0};se.zzEncode=se.zzDecode=function(){return this};se.length=function(){return 1};var qi=C.zeroHash="\0\0\0\0\0\0\0\0";C.fromNumber=function(t){if(t===0)return se;var e=t<0;e&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return e&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new C(n,i)};C.from=function(t){if(typeof t=="number")return C.fromNumber(t);if(we.isString(t))if(we.Long)t=we.Long.fromString(t);else return C.fromNumber(parseInt(t,10));return t.low||t.high?new C(t.low>>>0,t.high>>>0):se};C.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+n*4294967296)}return this.lo+this.hi*4294967296};C.prototype.toLong=function(t){return we.Long?new we.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var Y=String.prototype.charCodeAt;C.fromHash=function(t){return t===qi?se:new C((Y.call(t,0)|Y.call(t,1)<<8|Y.call(t,2)<<16|Y.call(t,3)<<24)>>>0,(Y.call(t,4)|Y.call(t,5)<<8|Y.call(t,6)<<16|Y.call(t,7)<<24)>>>0)};C.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};C.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};C.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};C.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}});var $=d(_t=>{"use strict";var f=_t;f.asPromise=pt();f.base64=Cn();f.EventEmitter=An();f.float=Bn();f.inquire=yt();f.utf8=Jn();f.pool=Un();f.LongBits=Wn();f.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);f.global=f.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||_t;f.emptyArray=Object.freeze?Object.freeze([]):[];f.emptyObject=Object.freeze?Object.freeze({}):{};f.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};f.isString=function(t){return typeof t=="string"||t instanceof String};f.isObject=function(t){return t&&typeof t=="object"};f.isset=f.isSet=function(t,e){var n=t[e];return n!=null&&t.hasOwnProperty(e)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};f.Buffer=function(){try{var r=f.inquire("buffer").Buffer;return r.prototype.utf8Write?r:null}catch{return null}}();f._Buffer_from=null;f._Buffer_allocUnsafe=null;f.newBuffer=function(t){return typeof t=="number"?f.Buffer?f._Buffer_allocUnsafe(t):new f.Array(t):f.Buffer?f._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};f.Array=typeof Uint8Array<"u"?Uint8Array:Array;f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long");f.key2Re=/^true|false|0|1$/;f.key32Re=/^-?(?:0|[1-9][0-9]*)$/;f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;f.longToHash=function(t){return t?f.LongBits.from(t).toHash():f.LongBits.zeroHash};f.longFromHash=function(t,e){var n=f.LongBits.fromHash(t);return f.Long?f.Long.fromBits(n.lo,n.hi,e):n.toNumber(!!e)};function $n(r,t,e){for(var n=Object.keys(t),i=0;i<n.length;++i)(r[n[i]]===void 0||!e)&&(r[n[i]]=t[n[i]]);return r}f.merge=$n;f.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Hn(r){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&$n(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return r},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}f.newError=Hn;f.ProtocolError=Hn("ProtocolError");f.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(e[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};f.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}};f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};f._configure=function(){var r=f.Buffer;if(!r){f._Buffer_from=f._Buffer_allocUnsafe=null;return}f._Buffer_from=r.from!==Uint8Array.from&&r.from||function(e,n){return new r(e,n)},f._Buffer_allocUnsafe=r.allocUnsafe||function(e){return new r(e)}}});var $e=d((Po,Gn)=>{"use strict";Gn.exports=y;var N=$(),gt,We=N.LongBits,Kn=N.base64,Vn=N.utf8;function Se(r,t,e){this.fn=r,this.len=t,this.next=void 0,this.val=e}function vt(){}function Di(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function y(){this.len=0,this.head=new Se(vt,0,0),this.tail=this.head,this.states=null}var Zn=function(){return N.Buffer?function(){return(y.create=function(){return new gt})()}:function(){return new y}};y.create=Zn();y.alloc=function(t){return new N.Array(t)};N.Array!==Array&&(y.alloc=N.pool(y.alloc,N.Array.prototype.subarray));y.prototype._push=function(t,e,n){return this.tail=this.tail.next=new Se(t,e,n),this.len+=e,this};function wt(r,t,e){t[e]=r&255}function Li(r,t,e){for(;r>127;)t[e++]=r&127|128,r>>>=7;t[e]=r}function St(r,t){this.len=r,this.next=void 0,this.val=t}St.prototype=Object.create(Se.prototype);St.prototype.fn=Li;y.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new St((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};y.prototype.int32=function(t){return t<0?this._push(xt,10,We.fromNumber(t)):this.uint32(t)};y.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function xt(r,t,e){for(;r.hi;)t[e++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)t[e++]=r.lo&127|128,r.lo=r.lo>>>7;t[e++]=r.lo}y.prototype.uint64=function(t){var e=We.from(t);return this._push(xt,e.length(),e)};y.prototype.int64=y.prototype.uint64;y.prototype.sint64=function(t){var e=We.from(t).zzEncode();return this._push(xt,e.length(),e)};y.prototype.bool=function(t){return this._push(wt,1,t?1:0)};function bt(r,t,e){t[e]=r&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24}y.prototype.fixed32=function(t){return this._push(bt,4,t>>>0)};y.prototype.sfixed32=y.prototype.fixed32;y.prototype.fixed64=function(t){var e=We.from(t);return this._push(bt,4,e.lo)._push(bt,4,e.hi)};y.prototype.sfixed64=y.prototype.fixed64;y.prototype.float=function(t){return this._push(N.float.writeFloatLE,4,t)};y.prototype.double=function(t){return this._push(N.float.writeDoubleLE,8,t)};var Ni=N.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var i=0;i<t.length;++i)e[n+i]=t[i]};y.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(wt,1,0);if(N.isString(t)){var n=y.alloc(e=Kn.length(t));Kn.decode(t,n,0),t=n}return this.uint32(e)._push(Ni,e,t)};y.prototype.string=function(t){var e=Vn.length(t);return e?this.uint32(e)._push(Vn.write,e,t):this._push(wt,1,0)};y.prototype.fork=function(){return this.states=new Di(this),this.head=this.tail=new Se(vt,0,0),this.len=0,this};y.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Se(vt,0,0),this.len=0),this};y.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this};y.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e};y._configure=function(r){gt=r,y.create=Zn(),gt._configure()}});var Yn=d((Ao,Qn)=>{"use strict";Qn.exports=H;var Xn=$e();(H.prototype=Object.create(Xn.prototype)).constructor=H;var ee=$();function H(){Xn.call(this)}H._configure=function(){H.alloc=ee._Buffer_allocUnsafe,H.writeBytesBuffer=ee.Buffer&&ee.Buffer.prototype instanceof Uint8Array&&ee.Buffer.prototype.set.name==="set"?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var i=0;i<t.length;)e[n++]=t[i++]}};H.prototype.bytes=function(t){ee.isString(t)&&(t=ee._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(H.writeBytesBuffer,e,t),this};function Ii(r,t,e){r.length<40?ee.utf8.write(r,t,e):t.utf8Write?t.utf8Write(r,e):t.write(r,e)}H.prototype.string=function(t){var e=ee.Buffer.byteLength(t);return this.uint32(e),e&&this._push(Ii,e,t),this};H._configure()});var Ke=d((qo,ir)=>{"use strict";ir.exports=E;var M=$(),Et,nr=M.LongBits,ji=M.utf8;function U(r,t){return RangeError("index out of range: "+r.pos+" + "+(t||1)+" > "+r.len)}function E(r){this.buf=r,this.pos=0,this.len=r.length}var er=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new E(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new E(t);throw Error("illegal buffer")},rr=function(){return M.Buffer?function(e){return(E.create=function(i){return M.Buffer.isBuffer(i)?new Et(i):er(i)})(e)}:er};E.create=rr();E.prototype._slice=M.Array.prototype.subarray||M.Array.prototype.slice;E.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,U(this,10);return t}}();E.prototype.int32=function(){return this.uint32()|0};E.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Ot(){var r=new nr(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw U(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,r}if(this.len-this.pos>4){for(;t<5;++t)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;t<5;++t){if(this.pos>=this.len)throw U(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}E.prototype.bool=function(){return this.uint32()!==0};function He(r,t){return(r[t-4]|r[t-3]<<8|r[t-2]<<16|r[t-1]<<24)>>>0}E.prototype.fixed32=function(){if(this.pos+4>this.len)throw U(this,4);return He(this.buf,this.pos+=4)};E.prototype.sfixed32=function(){if(this.pos+4>this.len)throw U(this,4);return He(this.buf,this.pos+=4)|0};function tr(){if(this.pos+8>this.len)throw U(this,8);return new nr(He(this.buf,this.pos+=4),He(this.buf,this.pos+=4))}E.prototype.float=function(){if(this.pos+4>this.len)throw U(this,4);var t=M.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};E.prototype.double=function(){if(this.pos+8>this.len)throw U(this,4);var t=M.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};E.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw U(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,n);if(e===n){var i=M.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,n)};E.prototype.string=function(){var t=this.bytes();return ji.read(t,0,t.length)};E.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw U(this,t);this.pos+=t}else do if(this.pos>=this.len)throw U(this);while(this.buf[this.pos++]&128);return this};E.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};E._configure=function(r){Et=r,E.create=rr(),Et._configure();var t=M.Long?"toLong":"toNumber";M.merge(E.prototype,{int64:function(){return Ot.call(this)[t](!1)},uint64:function(){return Ot.call(this)[t](!0)},sint64:function(){return Ot.call(this).zzDecode()[t](!1)},fixed64:function(){return tr.call(this)[t](!0)},sfixed64:function(){return tr.call(this)[t](!1)}})}});var ur=d((Do,ar)=>{"use strict";ar.exports=oe;var or=Ke();(oe.prototype=Object.create(or.prototype)).constructor=oe;var sr=$();function oe(r){or.call(this,r)}oe._configure=function(){sr.Buffer&&(oe.prototype._slice=sr.Buffer.prototype.slice)};oe.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};oe._configure()});var lr=d((Lo,cr)=>{"use strict";cr.exports=xe;var Tt=$();(xe.prototype=Object.create(Tt.EventEmitter.prototype)).constructor=xe;function xe(r,t,e){if(typeof r!="function")throw TypeError("rpcImpl must be a function");Tt.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!t,this.responseDelimited=!!e}xe.prototype.rpcCall=function r(t,e,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Tt.asPromise(r,o,t,e,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(t,e[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return o.emit("error",u,t),s(u);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(l){return o.emit("error",l,t),s(l)}return o.emit("data",c,t),s(null,c)})}catch(a){o.emit("error",a,t),setTimeout(function(){s(a)},0);return}};xe.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var kt=d(fr=>{"use strict";var Bi=fr;Bi.Service=lr()});var Rt=d((Io,hr)=>{"use strict";hr.exports={}});var yr=d(pr=>{"use strict";var q=pr;q.build="minimal";q.Writer=$e();q.BufferWriter=Yn();q.Reader=Ke();q.BufferReader=ur();q.util=$();q.rpc=kt();q.roots=Rt();q.configure=dr;function dr(){q.util._configure(),q.Writer._configure(q.BufferWriter),q.Reader._configure(q.BufferReader)}dr()});var _r=d((Bo,mr)=>{"use strict";mr.exports=Ct;function Ct(r,t){typeof r=="string"&&(t=r,r=void 0);var e=[];function n(s){if(typeof s!="string"){var o=i();if(Ct.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),u=new Array(a.length+1),c=new Array(a.length),l=0;l<a.length;)u[l]=a[l],c[l]=s[a[l++]];return u[l]=o,Function.apply(null,u).apply(null,c)}return Function(o)()}for(var m=new Array(arguments.length-1),w=0;w<m.length;)m[w]=arguments[++w];if(w=0,s=s.replace(/%([%dfijs])/g,function(v,h){var b=m[w++];switch(h){case"d":case"f":return String(Number(b));case"i":return String(Math.floor(b));case"j":return JSON.stringify(b);case"s":return String(b)}return"%"}),w!==m.length)throw Error("parameter count mismatch");return e.push(s),n}function i(s){return"function "+(s||t||"")+"("+(r&&r.join(",")||"")+`){
  `+e.join(`
  `)+`
}`}return n.toString=i,n}Ct.verbose=!1});var br=d((Fo,gr)=>{"use strict";gr.exports=Oe;var Fi=pt(),Ji=yt(),Pt=Ji("fs");function Oe(r,t,e){return typeof t=="function"?(e=t,t={}):t||(t={}),e?!t.xhr&&Pt&&Pt.readFile?Pt.readFile(r,function(i,s){return i&&typeof XMLHttpRequest<"u"?Oe.xhr(r,t,e):i?e(i):e(null,t.binary?s:s.toString("utf8"))}):Oe.xhr(r,t,e):Fi(Oe,this,r,t)}Oe.xhr=function(t,e,n){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return n(Error("status "+i.status));if(e.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return n(null,i.responseText)}},e.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",t),i.send()}});var Sr=d(wr=>{"use strict";var qt=wr,vr=qt.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},At=qt.normalize=function(t){t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var e=t.split("/"),n=vr(t),i="";n&&(i=e.shift()+"/");for(var s=0;s<e.length;)e[s]===".."?s>0&&e[s-1]!==".."?e.splice(--s,2):n?e.splice(s,1):++s:e[s]==="."?e.splice(s,1):++s;return i+e.join("/")};qt.resolve=function(t,e,n){return n||(e=At(e)),vr(e)?e:(n||(t=At(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?At(t+"/"+e):e)}});var pe=d(xr=>{"use strict";var Ee=xr,Mi=P(),Ui=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Te(r,t){var e=0,n={};for(t|=0;e<r.length;)n[Ui[e+t]]=r[e++];return n}Ee.basic=Te([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Ee.defaults=Te([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",Mi.emptyArray,null]);Ee.long=Te([0,0,0,1,1],7);Ee.mapKey=Te([0,0,0,5,5,0,0,0,1,1,0,2],2);Ee.packed=Te([1,5,0,0,0,5,5,0,0,0,1,1,0])});var ae=d((Uo,Tr)=>{"use strict";Tr.exports=I;var Ve=ue();((I.prototype=Object.create(Ve.prototype)).constructor=I).className="Field";var Or=K(),Er=pe(),k=P(),Dt,zi=/^required|optional|repeated$/;I.fromJSON=function(t,e){return new I(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)};function I(r,t,e,n,i,s,o){if(k.isObject(n)?(o=i,s=n,n=i=void 0):k.isObject(i)&&(o=s,s=i,i=void 0),Ve.call(this,r,s),!k.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!k.isString(e))throw TypeError("type must be a string");if(n!==void 0&&!zi.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!k.isString(i))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=e,this.id=t,this.extend=i||void 0,this.required=n==="required",this.optional=!this.required,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=k.Long?Er.long[e]!==void 0:!1,this.bytes=e==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(I.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});I.prototype.setOption=function(t,e,n){return t==="packed"&&(this._packed=null),Ve.prototype.setOption.call(this,t,e,n)};I.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return k.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])};I.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=Er.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Dt?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof Or&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof Or))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=k.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var t;k.base64.test(this.typeDefault)?k.base64.decode(this.typeDefault,t=k.newBuffer(k.base64.length(this.typeDefault)),0):k.utf8.write(this.typeDefault,t=k.newBuffer(k.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=k.emptyObject:this.repeated?this.defaultValue=k.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Dt&&(this.parent.ctor.prototype[this.name]=this.defaultValue),Ve.prototype.resolve.call(this)};I.d=function(t,e,n,i){return typeof e=="function"?e=k.decorateType(e).name:e&&typeof e=="object"&&(e=k.decorateEnum(e).name),function(o,a){k.decorateType(o.constructor).add(new I(a,t,e,n,{default:i}))}};I._configure=function(t){Dt=t}});var ke=d((zo,Cr)=>{"use strict";Cr.exports=j;var Ge=ue();((j.prototype=Object.create(Ge.prototype)).constructor=j).className="OneOf";var kr=ae(),Ze=P();function j(r,t,e,n){if(Array.isArray(t)||(e=t,t=void 0),Ge.call(this,r,e),!(t===void 0||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}j.fromJSON=function(t,e){return new j(t,e.oneof,e.options,e.comment)};j.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return Ze.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])};function Rr(r){if(r.parent)for(var t=0;t<r.fieldsArray.length;++t)r.fieldsArray[t].parent||r.parent.add(r.fieldsArray[t])}j.prototype.add=function(t){if(!(t instanceof kr))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,Rr(this),this};j.prototype.remove=function(t){if(!(t instanceof kr))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),e=this.oneof.indexOf(t.name),e>-1&&this.oneof.splice(e,1),t.partOf=null,this};j.prototype.onAdd=function(t){Ge.prototype.onAdd.call(this,t);for(var e=this,n=0;n<this.oneof.length;++n){var i=t.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=e,e.fieldsArray.push(i))}Rr(this)};j.prototype.onRemove=function(t){for(var e=0,n;e<this.fieldsArray.length;++e)(n=this.fieldsArray[e]).parent&&n.parent.remove(n);Ge.prototype.onRemove.call(this,t)};j.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(i,s){Ze.decorateType(i.constructor).add(new j(s,t)),Object.defineProperty(i,s,{get:Ze.oneOfGetter(t),set:Ze.oneOfSetter(t)})}}});var _e=d((Wo,Dr)=>{"use strict";Dr.exports=_;var Lt=ue();((_.prototype=Object.create(Lt.prototype)).constructor=_).className="Namespace";var Pr=ae(),Xe=P(),Wi=ke(),ye,Re,me;_.fromJSON=function(t,e){return new _(t,e.options).addJSON(e.nested)};function Ar(r,t){if(r&&r.length){for(var e={},n=0;n<r.length;++n)e[r[n].name]=r[n].toJSON(t);return e}}_.arrayToJSON=Ar;_.isReservedId=function(t,e){if(t){for(var n=0;n<t.length;++n)if(typeof t[n]!="string"&&t[n][0]<=e&&t[n][1]>e)return!0}return!1};_.isReservedName=function(t,e){if(t){for(var n=0;n<t.length;++n)if(t[n]===e)return!0}return!1};function _(r,t){Lt.call(this,r,t),this.nested=void 0,this._nestedArray=null}function qr(r){return r._nestedArray=null,r}Object.defineProperty(_.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=Xe.toArray(this.nested))}});_.prototype.toJSON=function(t){return Xe.toObject(["options",this.options,"nested",Ar(this.nestedArray,t)])};_.prototype.addJSON=function(t){var e=this;if(t)for(var n=Object.keys(t),i=0,s;i<n.length;++i)s=t[n[i]],e.add((s.fields!==void 0?ye.fromJSON:s.values!==void 0?me.fromJSON:s.methods!==void 0?Re.fromJSON:s.id!==void 0?Pr.fromJSON:_.fromJSON)(n[i],s));return this};_.prototype.get=function(t){return this.nested&&this.nested[t]||null};_.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof me)return this.nested[t].values;throw Error("no such enum: "+t)};_.prototype.add=function(t){if(!(t instanceof Pr&&t.extend!==void 0||t instanceof ye||t instanceof Wi||t instanceof me||t instanceof Re||t instanceof _))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var e=this.get(t.name);if(e)if(e instanceof _&&t instanceof _&&!(e instanceof ye||e instanceof Re)){for(var n=e.nestedArray,i=0;i<n.length;++i)t.add(n[i]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}else throw Error("duplicate name '"+t.name+"' in "+this)}return this.nested[t.name]=t,t.onAdd(this),qr(this)};_.prototype.remove=function(t){if(!(t instanceof Lt))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),qr(this)};_.prototype.define=function(t,e){if(Xe.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&t[0]==="")throw Error("path must be relative");for(var n=this;t.length>0;){var i=t.shift();if(n.nested&&n.nested[i]){if(n=n.nested[i],!(n instanceof _))throw Error("path conflicts with non-namespace objects")}else n.add(n=new _(i))}return e&&n.addJSON(e),n};_.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof _?t[e++].resolveAll():t[e++].resolve();return this.resolve()};_.prototype.lookup=function(t,e,n){if(typeof e=="boolean"?(n=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),Xe.isString(t)&&t.length){if(t===".")return this.root;t=t.split(".")}else if(!t.length)return this;if(t[0]==="")return this.root.lookup(t.slice(1),e);var i=this.get(t[0]);if(i){if(t.length===1){if(!e||e.indexOf(i.constructor)>-1)return i}else if(i instanceof _&&(i=i.lookup(t.slice(1),e,!0)))return i}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof _&&(i=this._nestedArray[s].lookup(t,e,!0)))return i;return this.parent===null||n?null:this.parent.lookup(t,e)};_.prototype.lookupType=function(t){var e=this.lookup(t,[ye]);if(!e)throw Error("no such type: "+t);return e};_.prototype.lookupEnum=function(t){var e=this.lookup(t,[me]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e};_.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[ye,me]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e};_.prototype.lookupService=function(t){var e=this.lookup(t,[Re]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e};_._configure=function(r,t,e){ye=r,Re=t,me=e}});var It=d(($o,Lr)=>{"use strict";Lr.exports=X;var Nt=ae();((X.prototype=Object.create(Nt.prototype)).constructor=X).className="MapField";var $i=pe(),Ce=P();function X(r,t,e,n,i,s){if(Nt.call(this,r,t,n,void 0,void 0,i,s),!Ce.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}X.fromJSON=function(t,e){return new X(t,e.id,e.keyType,e.type,e.options,e.comment)};X.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return Ce.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])};X.prototype.resolve=function(){if(this.resolved)return this;if($i.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Nt.prototype.resolve.call(this)};X.d=function(t,e,n){return typeof n=="function"?n=Ce.decorateType(n).name:n&&typeof n=="object"&&(n=Ce.decorateEnum(n).name),function(s,o){Ce.decorateType(s.constructor).add(new X(o,t,e,n))}}});var Bt=d((Ho,Nr)=>{"use strict";Nr.exports=ce;var jt=ue();((ce.prototype=Object.create(jt.prototype)).constructor=ce).className="Method";var ge=P();function ce(r,t,e,n,i,s,o,a,u){if(ge.isObject(i)?(o=i,i=s=void 0):ge.isObject(s)&&(o=s,s=void 0),!(t===void 0||ge.isString(t)))throw TypeError("type must be a string");if(!ge.isString(e))throw TypeError("requestType must be a string");if(!ge.isString(n))throw TypeError("responseType must be a string");jt.call(this,r,o),this.type=t||"rpc",this.requestType=e,this.requestStream=i?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=u}ce.fromJSON=function(t,e){return new ce(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)};ce.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return ge.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])};ce.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),jt.prototype.resolve.call(this))}});var Jt=d((Ko,jr)=>{"use strict";jr.exports=B;var te=_e();((B.prototype=Object.create(te.prototype)).constructor=B).className="Service";var Ft=Bt(),Pe=P(),Hi=kt();function B(r,t){te.call(this,r,t),this.methods={},this._methodsArray=null}B.fromJSON=function(t,e){var n=new B(t,e.options);if(e.methods)for(var i=Object.keys(e.methods),s=0;s<i.length;++s)n.add(Ft.fromJSON(i[s],e.methods[i[s]]));return e.nested&&n.addJSON(e.nested),n.comment=e.comment,n};B.prototype.toJSON=function(t){var e=te.prototype.toJSON.call(this,t),n=t?!!t.keepComments:!1;return Pe.toObject(["options",e&&e.options||void 0,"methods",te.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(B.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Pe.toArray(this.methods))}});function Ir(r){return r._methodsArray=null,r}B.prototype.get=function(t){return this.methods[t]||te.prototype.get.call(this,t)};B.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return te.prototype.resolve.call(this)};B.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof Ft?(this.methods[t.name]=t,t.parent=this,Ir(this)):te.prototype.add.call(this,t)};B.prototype.remove=function(t){if(t instanceof Ft){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,Ir(this)}return te.prototype.remove.call(this,t)};B.prototype.create=function(t,e,n){for(var i=new Hi.Service(t,e,n),s=0,o;s<this.methodsArray.length;++s){var a=Pe.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=Pe.codegen(["r","c"],Pe.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var Qe=d((Vo,Br)=>{"use strict";Br.exports=V;var Ki=$();function V(r){if(r)for(var t=Object.keys(r),e=0;e<t.length;++e)this[t[e]]=r[t[e]]}V.create=function(t){return this.$type.create(t)};V.encode=function(t,e){return this.$type.encode(t,e)};V.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)};V.decode=function(t){return this.$type.decode(t)};V.decodeDelimited=function(t){return this.$type.decodeDelimited(t)};V.verify=function(t){return this.$type.verify(t)};V.fromObject=function(t){return this.$type.fromObject(t)};V.toObject=function(t,e){return this.$type.toObject(t,e)};V.prototype.toJSON=function(){return this.$type.toObject(this,Ki.toJSONOptions)}});var Mt=d((Zo,Jr)=>{"use strict";Jr.exports=Gi;var Vi=K(),Q=pe(),Fr=P();function Zi(r){return"missing required '"+r.name+"'"}function Gi(r){var t=Fr.codegen(["r","l"],r.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(r.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");r.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var e=0;e<r.fieldsArray.length;++e){var n=r._fieldsArray[e].resolve(),i=n.resolvedType instanceof Vi?"int32":n.type,s="m"+Fr.safeProp(n.name);t("case %i: {",n.id),n.map?(t("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),Q.defaults[n.keyType]!==void 0?t("k=%j",Q.defaults[n.keyType]):t("k=null"),Q.defaults[i]!==void 0?t("value=%j",Q.defaults[i]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),Q.basic[i]===void 0?t("value=types[%i].decode(r,r.uint32())",e):t("value=r.%s()",i),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),Q.long[n.keyType]!==void 0?t('%s[typeof k==="object"?util.longToHash(k):k]=value',s):t("%s[k]=value",s)):n.repeated?(t("if(!(%s&&%s.length))",s,s)("%s=[]",s),Q.packed[i]!==void 0&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),Q.basic[i]===void 0?t(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,e):t("%s.push(r.%s())",s,i)):Q.basic[i]===void 0?t(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,e):t("%s=r.%s()",s,i),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<r._fieldsArray.length;++e){var o=r._fieldsArray[e];o.required&&t("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",Zi(o))}return t("return m")}});var Wt=d((Go,Mr)=>{"use strict";Mr.exports=Yi;var Xi=K(),Ut=P();function F(r,t){return r.name+": "+t+(r.repeated&&t!=="array"?"[]":r.map&&t!=="object"?"{k:"+r.keyType+"}":"")+" expected"}function zt(r,t,e,n){if(t.resolvedType)if(t.resolvedType instanceof Xi){r("switch(%s){",n)("default:")("return%j",F(t,"enum value"));for(var i=Object.keys(t.resolvedType.values),s=0;s<i.length;++s)r("case %i:",t.resolvedType.values[i[s]]);r("break")("}")}else r("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.isInteger(%s))",n)("return%j",F(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",F(t,"integer|Long"));break;case"float":case"double":r('if(typeof %s!=="number")',n)("return%j",F(t,"number"));break;case"bool":r('if(typeof %s!=="boolean")',n)("return%j",F(t,"boolean"));break;case"string":r("if(!util.isString(%s))",n)("return%j",F(t,"string"));break;case"bytes":r('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",F(t,"buffer"));break}return r}function Qi(r,t,e){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":r("if(!util.key32Re.test(%s))",e)("return%j",F(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":r("if(!util.key64Re.test(%s))",e)("return%j",F(t,"integer|Long key"));break;case"bool":r("if(!util.key2Re.test(%s))",e)("return%j",F(t,"boolean key"));break}return r}function Yi(r){var t=Ut.codegen(["m"],r.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=r.oneofsArray,n={};e.length&&t("var p={}");for(var i=0;i<r.fieldsArray.length;++i){var s=r._fieldsArray[i].resolve(),o="m"+Ut.safeProp(s.name);if(s.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)t("if(!util.isObject(%s))",o)("return%j",F(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),Qi(t,s,"k[i]"),zt(t,s,i,o+"[k[i]]")("}");else if(s.repeated)t("if(!Array.isArray(%s))",o)("return%j",F(s,"array"))("for(var i=0;i<%s.length;++i){",o),zt(t,s,i,o+"[i]")("}");else{if(s.partOf){var a=Ut.safeProp(s.partOf.name);n[s.partOf.name]===1&&t("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,t("p%s=1",a)}zt(t,s,i,o)}s.optional&&t("}")}return t("return null")}});var Kt=d(zr=>{"use strict";var Ur=zr,Ae=K(),Z=P();function $t(r,t,e,n){var i=!1;if(t.resolvedType)if(t.resolvedType instanceof Ae){r("switch(d%s){",n);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===t.typeDefault&&!i&&(r("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||r("break"),i=!0),r("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break");r("}")}else r('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,e,n);else{var u=!1;switch(t.type){case"double":case"float":r("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":r("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":r("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":r('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":r("m%s=String(d%s)",n,n);break;case"bool":r("m%s=Boolean(d%s)",n,n);break}}return r}Ur.fromObject=function(t){var e=t.fieldsArray,n=Z.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return n("return new this.ctor");n("var m=new this.ctor");for(var i=0;i<e.length;++i){var s=e[i].resolve(),o=Z.safeProp(s.name);s.map?(n("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),$t(n,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),$t(n,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Ae||n("if(d%s!=null){",o),$t(n,s,i,o),s.resolvedType instanceof Ae||n("}"))}return n("return m")};function Ht(r,t,e,n){if(t.resolvedType)t.resolvedType instanceof Ae?r("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,e,n,n,e,n,n):r("d%s=types[%i].toObject(m%s,o)",n,e,n);else{var i=!1;switch(t.type){case"double":case"float":r("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":r('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,i?"true":"",n);break;case"bytes":r("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:r("d%s=m%s",n,n);break}}return r}Ur.toObject=function(t){var e=t.fieldsArray.slice().sort(Z.compareFieldsById);if(!e.length)return Z.codegen()("return {}");for(var n=Z.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<e.length;++a)e[a].partOf||(e[a].resolve().repeated?i:e[a].map?s:o).push(e[a]);if(i.length){for(n("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)n("d%s=[]",Z.safeProp(i[a].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),a=0;a<s.length;++a)n("d%s={}",Z.safeProp(s[a].name));n("}")}if(o.length){for(n("if(o.defaults){"),a=0;a<o.length;++a){var u=o[a],c=Z.safeProp(u.name);if(u.resolvedType instanceof Ae)n("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var l="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",c,l)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else n("d%s=%j",c,u.typeDefault)}n("}")}var m=!1;for(a=0;a<e.length;++a){var u=e[a],w=t._fieldsArray.indexOf(u),c=Z.safeProp(u.name);u.map?(m||(m=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),Ht(n,u,w,c+"[ks2[j]]")("}")):u.repeated?(n("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),Ht(n,u,w,c+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),Ht(n,u,w,c),u.partOf&&n("if(o.oneofs)")("d%s=%j",Z.safeProp(u.partOf.name),u.name)),n("}")}return n("return d")}});var Vt=d(Wr=>{"use strict";var es=Wr,ts=Qe();es[".google.protobuf.Any"]={fromObject:function(r){if(r&&r["@type"]){var t=r["@type"].substring(r["@type"].lastIndexOf("/")+1),e=this.lookup(t);if(e){var n=r["@type"].charAt(0)==="."?r["@type"].slice(1):r["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:e.encode(e.fromObject(r)).finish()})}}return this.fromObject(r)},toObject:function(r,t){var e="type.googleapis.com/",n="",i="";if(t&&t.json&&r.type_url&&r.value){i=r.type_url.substring(r.type_url.lastIndexOf("/")+1),n=r.type_url.substring(0,r.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(r=s.decode(r.value))}if(!(r instanceof this.ctor)&&r instanceof ts){var o=r.$type.toObject(r,t),a=r.$type.fullName[0]==="."?r.$type.fullName.slice(1):r.$type.fullName;return n===""&&(n=e),i=n+a,o["@type"]=i,o}return this.toObject(r,t)}}});var Qt=d((Yo,Hr)=>{"use strict";Hr.exports=O;var z=_e();((O.prototype=Object.create(z.prototype)).constructor=O).className="Type";var ns=K(),Xt=ke(),Ye=ae(),rs=It(),is=Jt(),Zt=Qe(),Gt=Ke(),ss=$e(),A=P(),os=Yt(),as=Mt(),us=Wt(),$r=Kt(),cs=Vt();function O(r,t){z.call(this,r,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(O.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var r=Object.keys(this.fields),t=0;t<r.length;++t){var e=this.fields[r[t]],n=e.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=e}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=A.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=A.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=O.generateConstructor(this)())},set:function(r){var t=r.prototype;t instanceof Zt||((r.prototype=new Zt).constructor=r,A.merge(r.prototype,t)),r.$type=r.prototype.$type=this,A.merge(r,Zt,!0),this._ctor=r;for(var e=0;e<this.fieldsArray.length;++e)this._fieldsArray[e].resolve();var n={};for(e=0;e<this.oneofsArray.length;++e)n[this._oneofsArray[e].resolve().name]={get:A.oneOfGetter(this._oneofsArray[e].oneof),set:A.oneOfSetter(this._oneofsArray[e].oneof)};e&&Object.defineProperties(r.prototype,n)}}});O.generateConstructor=function(t){for(var e=A.codegen(["p"],t.name),n=0,i;n<t.fieldsArray.length;++n)(i=t._fieldsArray[n]).map?e("this%s={}",A.safeProp(i.name)):i.repeated&&e("this%s=[]",A.safeProp(i.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function et(r){return r._fieldsById=r._fieldsArray=r._oneofsArray=null,delete r.encode,delete r.decode,delete r.verify,r}O.fromJSON=function(t,e){var n=new O(t,e.options);n.extensions=e.extensions,n.reserved=e.reserved;for(var i=Object.keys(e.fields),s=0;s<i.length;++s)n.add((typeof e.fields[i[s]].keyType<"u"?rs.fromJSON:Ye.fromJSON)(i[s],e.fields[i[s]]));if(e.oneofs)for(i=Object.keys(e.oneofs),s=0;s<i.length;++s)n.add(Xt.fromJSON(i[s],e.oneofs[i[s]]));if(e.nested)for(i=Object.keys(e.nested),s=0;s<i.length;++s){var o=e.nested[i[s]];n.add((o.id!==void 0?Ye.fromJSON:o.fields!==void 0?O.fromJSON:o.values!==void 0?ns.fromJSON:o.methods!==void 0?is.fromJSON:z.fromJSON)(i[s],o))}return e.extensions&&e.extensions.length&&(n.extensions=e.extensions),e.reserved&&e.reserved.length&&(n.reserved=e.reserved),e.group&&(n.group=!0),e.comment&&(n.comment=e.comment),n};O.prototype.toJSON=function(t){var e=z.prototype.toJSON.call(this,t),n=t?!!t.keepComments:!1;return A.toObject(["options",e&&e.options||void 0,"oneofs",z.arrayToJSON(this.oneofsArray,t),"fields",z.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",n?this.comment:void 0])};O.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var n=this.oneofsArray;for(e=0;e<n.length;)n[e++].resolve();return z.prototype.resolveAll.call(this)};O.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null};O.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof Ye&&t.extend===void 0){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),et(this)}return t instanceof Xt?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),et(this)):z.prototype.add.call(this,t)};O.prototype.remove=function(t){if(t instanceof Ye&&t.extend===void 0){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),et(this)}if(t instanceof Xt){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),et(this)}return z.prototype.remove.call(this,t)};O.prototype.isReservedId=function(t){return z.isReservedId(this.reserved,t)};O.prototype.isReservedName=function(t){return z.isReservedName(this.reserved,t)};O.prototype.create=function(t){return new this.ctor(t)};O.prototype.setup=function(){for(var t=this.fullName,e=[],n=0;n<this.fieldsArray.length;++n)e.push(this._fieldsArray[n].resolve().resolvedType);this.encode=os(this)({Writer:ss,types:e,util:A}),this.decode=as(this)({Reader:Gt,types:e,util:A}),this.verify=us(this)({types:e,util:A}),this.fromObject=$r.fromObject(this)({types:e,util:A}),this.toObject=$r.toObject(this)({types:e,util:A});var i=cs[t];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};O.prototype.encode=function(t,e){return this.setup().encode(t,e)};O.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()};O.prototype.decode=function(t,e){return this.setup().decode(t,e)};O.prototype.decodeDelimited=function(t){return t instanceof Gt||(t=Gt.create(t)),this.decode(t,t.uint32())};O.prototype.verify=function(t){return this.setup().verify(t)};O.prototype.fromObject=function(t){return this.setup().fromObject(t)};O.prototype.toObject=function(t,e){return this.setup().toObject(t,e)};O.d=function(t){return function(n){A.decorateType(n,t)}}});var nn=d((ea,Xr)=>{"use strict";Xr.exports=D;var nt=_e();((D.prototype=Object.create(nt.prototype)).constructor=D).className="Root";var tn=ae(),Vr=K(),ls=ke(),ne=P(),Zr,en,qe;function D(r){nt.call(this,"",r),this.deferred=[],this.files=[]}D.fromJSON=function(t,e){return e||(e=new D),t.options&&e.setOptions(t.options),e.addJSON(t.nested)};D.prototype.resolvePath=ne.path.resolve;D.prototype.fetch=ne.fetch;function Gr(){}D.prototype.load=function r(t,e,n){typeof e=="function"&&(n=e,e=void 0);var i=this;if(!n)return ne.asPromise(r,i,t,e);var s=n===Gr;function o(g,v){if(n){var h=n;if(n=null,s)throw g;h(g,v)}}function a(g){var v=g.lastIndexOf("google/protobuf/");if(v>-1){var h=g.substring(v);if(h in qe)return h}return null}function u(g,v){try{if(ne.isString(v)&&v.charAt(0)==="{"&&(v=JSON.parse(v)),!ne.isString(v))i.setOptions(v.options).addJSON(v.nested);else{en.filename=g;var h=en(v,i,e),b,S=0;if(h.imports)for(;S<h.imports.length;++S)(b=a(h.imports[S])||i.resolvePath(g,h.imports[S]))&&c(b);if(h.weakImports)for(S=0;S<h.weakImports.length;++S)(b=a(h.weakImports[S])||i.resolvePath(g,h.weakImports[S]))&&c(b,!0)}}catch(R){o(R)}!s&&!l&&o(null,i)}function c(g,v){if(g=a(g)||g,!(i.files.indexOf(g)>-1)){if(i.files.push(g),g in qe){s?u(g,qe[g]):(++l,setTimeout(function(){--l,u(g,qe[g])}));return}if(s){var h;try{h=ne.fs.readFileSync(g).toString("utf8")}catch(b){v||o(b);return}u(g,h)}else++l,i.fetch(g,function(b,S){if(--l,!!n){if(b){v?l||o(null,i):o(b);return}u(g,S)}})}}var l=0;ne.isString(t)&&(t=[t]);for(var m=0,w;m<t.length;++m)(w=i.resolvePath("",t[m]))&&c(w);if(s)return i;l||o(null,i)};D.prototype.loadSync=function(t,e){if(!ne.isNode)throw Error("not supported");return this.load(t,e,Gr)};D.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return nt.prototype.resolveAll.call(this)};var tt=/^[A-Z]/;function Kr(r,t){var e=t.parent.lookup(t.extend);if(e){var n=new tn(t.fullName,t.id,t.type,t.rule,void 0,t.options);return e.get(n.name)||(n.declaringField=t,t.extensionField=n,e.add(n)),!0}return!1}D.prototype._handleAdd=function(t){if(t instanceof tn)t.extend!==void 0&&!t.extensionField&&(Kr(this,t)||this.deferred.push(t));else if(t instanceof Vr)tt.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof ls)){if(t instanceof Zr)for(var e=0;e<this.deferred.length;)Kr(this,this.deferred[e])?this.deferred.splice(e,1):++e;for(var n=0;n<t.nestedArray.length;++n)this._handleAdd(t._nestedArray[n]);tt.test(t.name)&&(t.parent[t.name]=t)}};D.prototype._handleRemove=function(t){if(t instanceof tn){if(t.extend!==void 0)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof Vr)tt.test(t.name)&&delete t.parent[t.name];else if(t instanceof nt){for(var n=0;n<t.nestedArray.length;++n)this._handleRemove(t._nestedArray[n]);tt.test(t.name)&&delete t.parent[t.name]}};D._configure=function(r,t,e){Zr=r,en=t,qe=e}});var P=d((ta,Yr)=>{"use strict";var T=Yr.exports=$(),Qr=Rt(),rn,sn;T.codegen=_r();T.fetch=br();T.path=Sr();T.fs=T.inquire("fs");T.toArray=function(t){if(t){for(var e=Object.keys(t),n=new Array(e.length),i=0;i<e.length;)n[i]=t[e[i++]];return n}return[]};T.toObject=function(t){for(var e={},n=0;n<t.length;){var i=t[n++],s=t[n++];s!==void 0&&(e[i]=s)}return e};var fs=/\\/g,hs=/"/g;T.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)};T.safeProp=function(t){return!/^[$\w_]+$/.test(t)||T.isReserved(t)?'["'+t.replace(fs,"\\\\").replace(hs,'\\"')+'"]':"."+t};T.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var ds=/_([a-z])/g;T.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(ds,function(e,n){return n.toUpperCase()})};T.compareFieldsById=function(t,e){return t.id-e.id};T.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(T.decorateRoot.remove(t.$type),t.$type.name=e,T.decorateRoot.add(t.$type)),t.$type;rn||(rn=Qt());var n=new rn(e||t.name);return T.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var ps=0;T.decorateEnum=function(t){if(t.$type)return t.$type;sn||(sn=K());var e=new sn("Enum"+ps++,t);return T.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e};T.setProperty=function(t,e,n){function i(s,o,a){var u=o.shift();if(u==="__proto__"||u==="prototype")return s;if(o.length>0)s[u]=i(s[u]||{},o,a);else{var c=s[u];c&&(a=[].concat(c).concat(a)),s[u]=a}return s}if(typeof t!="object")throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return e=e.split("."),i(t,e,n)};Object.defineProperty(T,"decorateRoot",{get:function(){return Qr.decorated||(Qr.decorated=new(nn()))}})});var ue=d((na,ei)=>{"use strict";ei.exports=L;L.className="ReflectionObject";var rt=P(),it;function L(r,t){if(!rt.isString(r))throw TypeError("name must be a string");if(t&&!rt.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=r,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(L.prototype,{root:{get:function(){for(var r=this;r.parent!==null;)r=r.parent;return r}},fullName:{get:function(){for(var r=[this.name],t=this.parent;t;)r.unshift(t.name),t=t.parent;return r.join(".")}}});L.prototype.toJSON=function(){throw Error()};L.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof it&&e._handleAdd(this)};L.prototype.onRemove=function(t){var e=t.root;e instanceof it&&e._handleRemove(this),this.parent=null,this.resolved=!1};L.prototype.resolve=function(){return this.resolved?this:(this.root instanceof it&&(this.resolved=!0),this)};L.prototype.getOption=function(t){if(this.options)return this.options[t]};L.prototype.setOption=function(t,e,n){return(!n||!this.options||this.options[t]===void 0)&&((this.options||(this.options={}))[t]=e),this};L.prototype.setParsedOption=function(t,e,n){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(n){var s=i.find(function(u){return Object.prototype.hasOwnProperty.call(u,t)});if(s){var o=s[t];rt.setProperty(o,n,e)}else s={},s[t]=rt.setProperty({},n,e),i.push(s)}else{var a={};a[t]=e,i.push(a)}return this};L.prototype.setOptions=function(t,e){if(t)for(var n=Object.keys(t),i=0;i<n.length;++i)this.setOption(n[i],t[n[i]],e);return this};L.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t};L._configure=function(r){it=r}});var K=d((ra,ri)=>{"use strict";ri.exports=G;var ti=ue();((G.prototype=Object.create(ti.prototype)).constructor=G).className="Enum";var ni=_e(),st=P();function G(r,t,e,n,i,s){if(ti.call(this,r,e),t&&typeof t!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.valuesOptions=s,this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)typeof t[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}G.fromJSON=function(t,e){var n=new G(t,e.values,e.options,e.comment,e.comments);return n.reserved=e.reserved,n};G.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return st.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])};G.prototype.add=function(t,e,n,i){if(!st.isString(t))throw TypeError("name must be a string");if(!st.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==void 0)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[e]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[t]=i||null),this.comments[t]=n||null,this};G.prototype.remove=function(t){if(!st.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(e==null)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this};G.prototype.isReservedId=function(t){return ni.isReservedId(this.reserved,t)};G.prototype.isReservedName=function(t){return ni.isReservedName(this.reserved,t)}});var Yt=d((ia,si)=>{"use strict";si.exports=ms;var ys=K(),on=pe(),an=P();function ii(r,t,e,n){return t.resolvedType.group?r("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):r("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,n,(t.id<<3|2)>>>0)}function ms(r){for(var t=an.codegen(["m","w"],r.name+"$encode")("if(!w)")("w=Writer.create()"),e,n,i=r.fieldsArray.slice().sort(an.compareFieldsById),e=0;e<i.length;++e){var s=i[e].resolve(),o=r._fieldsArray.indexOf(s),a=s.resolvedType instanceof ys?"int32":s.type,u=on.basic[a];n="m"+an.safeProp(s.name),s.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|on.mapKey[s.keyType],s.keyType),u===void 0?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,a,n),t("}")("}")):s.repeated?(t("if(%s!=null&&%s.length){",n,n),s.packed&&on.packed[a]!==void 0?t("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",a,n)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",n),u===void 0?ii(t,s,o,n+"[i]"):t("w.uint32(%i).%s(%s[i])",(s.id<<3|u)>>>0,a,n)),t("}")):(s.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),u===void 0?ii(t,s,o,n):t("w.uint32(%i).%s(%s)",(s.id<<3|u)>>>0,a,n))}return t("return w")}});var ai=d((sa,oi)=>{"use strict";var p=oi.exports=yr();p.build="light";function _s(r,t,e){return typeof t=="function"?(e=t,t=new p.Root):t||(t=new p.Root),t.load(r,e)}p.load=_s;function gs(r,t){return t||(t=new p.Root),t.loadSync(r)}p.loadSync=gs;p.encoder=Yt();p.decoder=Mt();p.verifier=Wt();p.converter=Kt();p.ReflectionObject=ue();p.Namespace=_e();p.Root=nn();p.Enum=K();p.Type=Qt();p.Field=ae();p.OneOf=ke();p.MapField=It();p.Service=Jt();p.Method=Bt();p.Message=Qe();p.wrappers=Vt();p.types=pe();p.util=P();p.ReflectionObject._configure(p.Root);p.Namespace._configure(p.Type,p.Service,p.Enum);p.Root._configure(p.Type);p.Field._configure(p.Type)});var ci=d((oa,ui)=>{"use strict";ui.exports=ai()});var xn=lt(ht());var Ne=(n=>(n.Disconnected="disconnected",n.Connecting="connecting",n.Connected="connected",n))(Ne||{}),Ie=(n=>(n.Unsubscribed="unsubscribed",n.Subscribing="subscribing",n.Subscribed="subscribed",n))(Ie||{});function vn(r,t){return r.lastIndexOf(t,0)===0}function dt(r){return r==null?!1:typeof r=="function"}function wn(r,t){if(globalThis.console){let e=globalThis.console[r];dt(e)&&e.apply(globalThis.console,t)}}function Ei(r,t){return Math.floor(Math.random()*(t-r+1)+r)}function fe(r,t,e){r>31&&(r=31);let n=Ei(0,Math.min(e,t*Math.pow(2,r)));return Math.min(e,t+n)}function Sn(r){return"error"in r&&r.error!==null}function he(r){return Math.min(r*1e3,2147483647)}var je=class extends xn.default{constructor(e,n,i){super();this._resubscribeTimeout=null;this._refreshTimeout=null;this.channel=n,this.state="unsubscribed",this._centrifuge=e,this._token="",this._getToken=null,this._data=null,this._getData=null,this._recover=!1,this._offset=null,this._epoch=null,this._recoverable=!1,this._positioned=!1,this._joinLeave=!1,this._minResubscribeDelay=500,this._maxResubscribeDelay=2e4,this._resubscribeTimeout=null,this._resubscribeAttempts=0,this._promises={},this._promiseId=0,this._inflight=!1,this._refreshTimeout=null,this._setOptions(i),this._centrifuge._debugEnabled?(this.on("state",s=>{this._centrifuge._debug("subscription state",n,s.oldState,"->",s.newState)}),this.on("error",s=>{this._centrifuge._debug("subscription error",n,s)})):this.on("error",function(){Function.prototype()})}ready(e){return this.state==="unsubscribed"?Promise.reject({code:7,message:this.state}):this.state==="subscribed"?Promise.resolve():new Promise((n,i)=>{let s={resolve:n,reject:i};e&&(s.timeout=setTimeout(function(){i({code:1,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=s})}subscribe(){this._isSubscribed()||(this._resubscribeAttempts=0,this._setSubscribing(0,"subscribe called"))}unsubscribe(){this._setUnsubscribed(0,"unsubscribe called",!0)}publish(e){let n=this;return this._methodCall().then(function(){return n._centrifuge.publish(n.channel,e)})}presence(){let e=this;return this._methodCall().then(function(){return e._centrifuge.presence(e.channel)})}presenceStats(){let e=this;return this._methodCall().then(function(){return e._centrifuge.presenceStats(e.channel)})}history(e){let n=this;return this._methodCall().then(function(){return n._centrifuge.history(n.channel,e)})}_methodCall(){return this._isSubscribed()?Promise.resolve():this._isUnsubscribed()?Promise.reject({code:7,message:this.state}):new Promise((e,n)=>{let i=setTimeout(function(){n({code:1,message:"timeout"})},this._centrifuge._config.timeout);this._promises[this._nextPromiseId()]={timeout:i,resolve:e,reject:n}})}_nextPromiseId(){return++this._promiseId}_needRecover(){return this._recover===!0}_isUnsubscribed(){return this.state==="unsubscribed"}_isSubscribing(){return this.state==="subscribing"}_isSubscribed(){return this.state==="subscribed"}_setState(e){if(this.state!==e){let n=this.state;return this.state=e,this.emit("state",{newState:e,oldState:n,channel:this.channel}),!0}return!1}_usesToken(){return this._token!==""||this._getToken!==null}_clearSubscribingState(){this._resubscribeAttempts=0,this._clearResubscribeTimeout()}_clearSubscribedState(){this._clearRefreshTimeout()}_setSubscribed(e){if(!this._isSubscribing())return;this._clearSubscribingState(),e.recoverable&&(this._recover=!0,this._offset=e.offset||0,this._epoch=e.epoch||""),this._setState("subscribed");let n=this._centrifuge._getSubscribeContext(this.channel,e);this.emit("subscribed",n),this._resolvePromises();let i=e.publications;if(i&&i.length>0)for(let s in i)i.hasOwnProperty(s)&&this._handlePublication(i[s]);e.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),he(e.ttl)))}_setSubscribing(e,n){this._isSubscribing()||(this._isSubscribed()&&this._clearSubscribedState(),this._setState("subscribing")&&this.emit("subscribing",{channel:this.channel,code:e,reason:n}),this._subscribe(!1,!1))}_subscribe(e,n){if(this._centrifuge._debug("subscribing on",this.channel),this._centrifuge.state!=="connected"&&!e)return this._centrifuge._debug("delay subscribe on",this.channel,"till connected"),null;let i=this,s={channel:i.channel};return!this._usesToken()||this._token?i._getData?(i._getData(s).then(function(o){i._isSubscribing()&&(i._data=o,i._sendSubscribe(i._token,!1))}),null):i._sendSubscribe(i._token,n):(e||this._getSubscriptionToken().then(function(o){if(i._isSubscribing()){if(!o){i._failUnauthorized();return}i._token=o,i._getData?i._getData(s).then(function(a){i._isSubscribing()&&(i._data=a,i._sendSubscribe(o,!1))}):i._sendSubscribe(o,!1)}}).catch(function(o){if(i._isSubscribing()){if(o instanceof W){i._failUnauthorized();return}i.emit("error",{type:"subscribeToken",channel:i.channel,error:{code:8,message:o!==void 0?o.toString():""}}),i._scheduleResubscribe()}}),null)}_sendSubscribe(e,n){let s={channel:this.channel};if(e&&(s.token=e),this._data&&(s.data=this._data),this._positioned&&(s.positioned=!0),this._recoverable&&(s.recoverable=!0),this._joinLeave&&(s.join_leave=!0),this._needRecover()){s.recover=!0;let a=this._getOffset();a&&(s.offset=a);let u=this._getEpoch();u&&(s.epoch=u)}let o={subscribe:s};return this._inflight=!0,this._centrifuge._call(o,n).then(a=>{this._inflight=!1;let u=a.reply.subscribe;this._handleSubscribeResponse(u),a.next&&a.next()},a=>{this._inflight=!1,this._handleSubscribeError(a.error),a.next&&a.next()}),o}_handleSubscribeError(e){if(this._isSubscribing()){if(e.code===1){this._centrifuge._disconnect(3,"subscribe timeout",!0);return}this._subscribeError(e)}}_handleSubscribeResponse(e){this._isSubscribing()&&this._setSubscribed(e)}_setUnsubscribed(e,n,i){this._isUnsubscribed()||(this._isSubscribed()&&(i&&this._centrifuge._unsubscribe(this),this._clearSubscribedState()),this._isSubscribing()&&(this._inflight&&i&&this._centrifuge._unsubscribe(this),this._clearSubscribingState()),this._setState("unsubscribed")&&this.emit("unsubscribed",{channel:this.channel,code:e,reason:n}),this._rejectPromises({code:7,message:this.state}))}_handlePublication(e){let n=this._centrifuge._getPublicationContext(this.channel,e);this.emit("publication",n),e.offset&&(this._offset=e.offset)}_handleJoin(e){let n=this._centrifuge._getJoinLeaveContext(e.info);this.emit("join",{channel:this.channel,info:n})}_handleLeave(e){let n=this._centrifuge._getJoinLeaveContext(e.info);this.emit("leave",{channel:this.channel,info:n})}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(e),delete this._promises[n])}_scheduleResubscribe(){let e=this,n=this._getResubscribeDelay();this._resubscribeTimeout=setTimeout(function(){e._isSubscribing()&&e._subscribe(!1,!1)},n)}_subscribeError(e){if(this._isSubscribing())if(e.code<100||e.code===109||e.temporary===!0){e.code===109&&(this._token="");let n={channel:this.channel,type:"subscribe",error:e};this._centrifuge.state==="connected"&&this.emit("error",n),this._scheduleResubscribe()}else this._setUnsubscribed(e.code,e.message,!1)}_getResubscribeDelay(){let e=fe(this._resubscribeAttempts,this._minResubscribeDelay,this._maxResubscribeDelay);return this._resubscribeAttempts++,e}_setOptions(e){e&&(e.since&&(this._offset=e.since.offset,this._epoch=e.since.epoch,this._recover=!0),e.data&&(this._data=e.data),e.getData&&(this._getData=e.getData),e.minResubscribeDelay!==void 0&&(this._minResubscribeDelay=e.minResubscribeDelay),e.maxResubscribeDelay!==void 0&&(this._maxResubscribeDelay=e.maxResubscribeDelay),e.token&&(this._token=e.token),e.getToken&&(this._getToken=e.getToken),e.positioned===!0&&(this._positioned=!0),e.recoverable===!0&&(this._recoverable=!0),e.joinLeave===!0&&(this._joinLeave=!0))}_getOffset(){let e=this._offset;return e!==null?e:0}_getEpoch(){let e=this._epoch;return e!==null?e:""}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearResubscribeTimeout(){this._resubscribeTimeout!==null&&(clearTimeout(this._resubscribeTimeout),this._resubscribeTimeout=null)}_getSubscriptionToken(){this._centrifuge._debug("get subscription token for channel",this.channel);let e={channel:this.channel},n=this._getToken;if(n===null)throw this.emit("error",{type:"configuration",channel:this.channel,error:{code:12,message:"provide a function to get channel subscription token"}}),new W("");return n(e)}_refresh(){this._clearRefreshTimeout();let e=this;this._getSubscriptionToken().then(function(n){if(!e._isSubscribed())return;if(!n){e._failUnauthorized();return}e._token=n;let s={sub_refresh:{channel:e.channel,token:n}};e._centrifuge._call(s).then(o=>{let a=o.reply.sub_refresh;e._refreshResponse(a),o.next&&o.next()},o=>{e._refreshError(o.error),o.next&&o.next()})}).catch(function(n){if(n instanceof W){e._failUnauthorized();return}e.emit("error",{type:"refreshToken",channel:e.channel,error:{code:9,message:n!==void 0?n.toString():""}}),e._refreshTimeout=setTimeout(()=>e._refresh(),e._getRefreshRetryDelay())})}_refreshResponse(e){this._isSubscribed()&&(this._centrifuge._debug("subscription token refreshed, channel",this.channel),this._clearRefreshTimeout(),e.expires===!0&&(this._refreshTimeout=setTimeout(()=>this._refresh(),he(e.ttl))))}_refreshError(e){this._isSubscribed()&&(e.code<100||e.temporary===!0?(this.emit("error",{type:"refresh",channel:this.channel,error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._setUnsubscribed(e.code,e.message,!0))}_getRefreshRetryDelay(){return fe(0,1e4,2e4)}_failUnauthorized(){this._setUnsubscribed(1,"unauthorized",!0)}};var Be=class{constructor(t,e){this.endpoint=t,this.options=e,this._transport=null}name(){return"sockjs"}subName(){return"sockjs-"+this._transport.transport}emulation(){return!1}supported(){return this.options.sockjs!==null}initialize(t,e){this._transport=new this.options.sockjs(this.endpoint,null,this.options.sockjsOptions),this._transport.onopen=()=>{e.onOpen()},this._transport.onerror=n=>{e.onError(n)},this._transport.onclose=n=>{e.onClose(n)},this._transport.onmessage=n=>{e.onMessage(n.data)}}close(){this._transport.close()}send(t){this._transport.send(t)}};var be=class{constructor(t,e){this.endpoint=t,this.options=e,this._transport=null}name(){return"websocket"}subName(){return"websocket"}emulation(){return!1}supported(){return this.options.websocket!==void 0&&this.options.websocket!==null}initialize(t,e){let n="";t==="protobuf"&&(n="centrifuge-protobuf"),n!==""?this._transport=new this.options.websocket(this.endpoint,n):this._transport=new this.options.websocket(this.endpoint),t==="protobuf"&&(this._transport.binaryType="arraybuffer"),this._transport.onopen=()=>{e.onOpen()},this._transport.onerror=i=>{e.onError(i)},this._transport.onclose=i=>{e.onClose(i)},this._transport.onmessage=i=>{e.onMessage(i.data)}}close(){this._transport.close()}send(t){this._transport.send(t)}};var Fe=class{constructor(t,e){this.endpoint=t,this.options=e,this._abortController=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"http_stream"}subName(){return"http_stream"}emulation(){return!0}_handleErrors(t){if(!t.ok)throw new Error(t.status);return t}_fetchEventTarget(t,e,n){let i=new EventTarget,s=t.options.fetch;return s(e,n).then(t._handleErrors).then(o=>{i.dispatchEvent(new Event("open"));let a="",u=0,c=new Uint8Array,l=o.body.getReader();return new t.options.readableStream({start(m){function w(){return l.read().then(({done:g,value:v})=>{if(g){i.dispatchEvent(new Event("close")),m.close();return}try{if(t._protocol==="json")for(a+=t._utf8decoder.decode(v);u<a.length;)if(a[u]===`
`){let h=a.substring(0,u);i.dispatchEvent(new MessageEvent("message",{data:h})),a=a.substring(u+1),u=0}else++u;else{let h=new Uint8Array(c.length+v.length);for(h.set(c),h.set(v,c.length),c=h;;){let b=t.options.decoder.decodeReply(c);if(b.ok){let S=c.slice(0,b.pos);i.dispatchEvent(new MessageEvent("message",{data:S})),c=c.slice(b.pos);continue}break}}}catch(h){i.dispatchEvent(new Event("error",{detail:h})),i.dispatchEvent(new Event("close")),m.close();return}w()}).catch(function(g){i.dispatchEvent(new Event("error",{detail:g})),i.dispatchEvent(new Event("close")),m.close()})}return w()}})}).catch(o=>{i.dispatchEvent(new Event("error",{detail:o})),i.dispatchEvent(new Event("close"))}),i}supported(){return this.options.fetch!==null&&this.options.readableStream!==null&&typeof TextDecoder<"u"&&typeof AbortController<"u"&&typeof EventTarget<"u"&&typeof Event<"u"&&typeof MessageEvent<"u"&&typeof Error<"u"}initialize(t,e,n){this._protocol=t,this._abortController=new AbortController;let i,s;t==="json"?(i={Accept:"application/json","Content-Type":"application/json"},s=n):(i={Accept:"application/octet-stream","Content-Type":"application/octet-stream"},s=n);let o={method:"POST",headers:i,body:s,mode:"cors",credentials:"same-origin",cache:"no-cache",signal:this._abortController.signal},a=this._fetchEventTarget(this,this.endpoint,o);a.addEventListener("open",()=>{e.onOpen()}),a.addEventListener("error",u=>{this._abortController.abort(),e.onError(u)}),a.addEventListener("close",()=>{this._abortController.abort(),e.onClose({code:4,reason:"connection closed"})}),a.addEventListener("message",u=>{e.onMessage(u.data)})}close(){this._abortController.abort()}send(t,e,n){let i,s,o={session:e,node:n,data:t};this._protocol==="json"?(i={"Content-Type":"application/json"},s=JSON.stringify(o)):(i={"Content-Type":"application/octet-stream"},s=this.options.encoder.encodeEmulationRequest(o));let a=this.options.fetch,u={method:"POST",headers:i,body:s,mode:"cors",credentials:"same-origin",cache:"no-cache"};a(this.options.emulationEndpoint,u)}};var Je=class{constructor(t,e){this.endpoint=t,this.options=e,this._protocol="json",this._transport=null,this._onClose=null}name(){return"sse"}subName(){return"sse"}emulation(){return!0}supported(){return this.options.eventsource!==null&&this.options.fetch!==null}initialize(t,e,n){let i;globalThis&&globalThis.document&&globalThis.document.baseURI?i=new URL(this.endpoint,globalThis.document.baseURI):i=new URL(this.endpoint),i.searchParams.append("cf_connect",n);let s={},o=new this.options.eventsource(i.toString(),s);this._transport=o;let a=this;o.onopen=function(){e.onOpen()},o.onerror=function(u){o.close(),e.onError(u),e.onClose({code:4,reason:"connection closed"})},o.onmessage=function(u){e.onMessage(u.data)},a._onClose=function(){e.onClose({code:4,reason:"connection closed"})}}close(){this._transport.close(),this._onClose!==null&&this._onClose()}send(t,e,n){let i={session:e,node:n,data:t},s={"Content-Type":"application/json"},o=JSON.stringify(i),a=this.options.fetch,u={method:"POST",headers:s,body:o,mode:"cors",credentials:"same-origin",cache:"no-cache"};a(this.options.emulationEndpoint,u)}};var Me=class{constructor(t,e){this.endpoint=t,this.options=e,this._transport=null,this._stream=null,this._writer=null,this._utf8decoder=new TextDecoder,this._protocol="json"}name(){return"webtransport"}subName(){return"webtransport"}emulation(){return!1}supported(){return this.options.webtransport!==void 0&&this.options.webtransport!==null}async initialize(t,e){let n;globalThis&&globalThis.document&&globalThis.document.baseURI?n=new URL(this.endpoint,globalThis.document.baseURI):n=new URL(this.endpoint),t==="protobuf"&&n.searchParams.append("cf_protocol","protobuf"),this._protocol=t;let i=new EventTarget;this._transport=new this.options.webtransport(n.toString()),this._transport.closed.then(()=>{e.onClose({code:4,reason:"connection closed"})}).catch(()=>{e.onClose({code:4,reason:"connection closed"})});try{await this._transport.ready}catch{this.close();return}let s;try{s=await this._transport.createBidirectionalStream()}catch{this.close();return}this._stream=s,this._writer=this._stream.writable.getWriter(),i.addEventListener("close",()=>{e.onClose({code:4,reason:"connection closed"})}),i.addEventListener("message",o=>{e.onMessage(o.data)}),this._startReading(i),e.onOpen()}async _startReading(t){let e=this._stream.readable.getReader(),n="",i=0,s=new Uint8Array;try{for(;;){let{done:o,value:a}=await e.read();if(a.length>0)if(this._protocol==="json")for(n+=this._utf8decoder.decode(a);i<n.length;)if(n[i]===`
`){let u=n.substring(0,i);t.dispatchEvent(new MessageEvent("message",{data:u})),n=n.substring(i+1),i=0}else++i;else{let u=new Uint8Array(s.length+a.length);for(u.set(s),u.set(a,s.length),s=u;;){let c=this.options.decoder.decodeReply(s);if(c.ok){let l=s.slice(0,c.pos);t.dispatchEvent(new MessageEvent("message",{data:l})),s=s.slice(c.pos);continue}break}}if(o)break}}catch{t.dispatchEvent(new Event("close"))}}async close(){try{this._writer&&await this._writer.close(),this._transport.close()}catch{}}async send(t){let e;this._protocol==="json"?e=new TextEncoder().encode(t+`
`):e=t;try{await this._writer.write(e)}catch{this.close()}}};var ve=class{name(){return"json"}encodeCommands(t){return t.map(e=>JSON.stringify(e)).join(`
`)}decodeReplies(t){return t.trim().split(`
`).map(e=>JSON.parse(e))}};var On=lt(ht()),Ci={token:"",getToken:null,data:null,getData:null,debug:!1,name:"js",version:"",fetch:null,readableStream:null,websocket:null,eventsource:null,sockjs:null,sockjsOptions:{},emulationEndpoint:"/emulation",minReconnectDelay:500,maxReconnectDelay:2e4,timeout:5e3,maxServerPingDelay:1e4,networkEventTarget:null},W=class extends Error{constructor(t){super(t),this.name=this.constructor.name}},ie=class extends On.default{constructor(e,n){super();this._reconnectTimeout=null;this._refreshTimeout=null;this._serverPingTimeout=null;this.state="disconnected",this._endpoint=e,this._emulation=!1,this._transports=[],this._currentTransportIndex=0,this._triedAllTransports=!1,this._transportWasOpen=!1,this._transport=null,this._transportId=0,this._deviceWentOffline=!1,this._transportClosed=!0,this._codec=new ve,this._reconnecting=!1,this._reconnectTimeout=null,this._reconnectAttempts=0,this._client=null,this._session="",this._node="",this._subs={},this._serverSubs={},this._commandId=0,this._commands=[],this._batching=!1,this._refreshRequired=!1,this._refreshTimeout=null,this._callbacks={},this._token="",this._data=null,this._dispatchPromise=Promise.resolve(),this._serverPing=0,this._serverPingTimeout=null,this._sendPong=!1,this._promises={},this._promiseId=0,this._debugEnabled=!1,this._networkEventsSet=!1,this._config={...Ci,...n},this._configure(),this._debugEnabled?(this.on("state",i=>{this._debug("client state",i.oldState,"->",i.newState)}),this.on("error",i=>{this._debug("client error",i)})):this.on("error",function(){Function.prototype()})}newSubscription(e,n){if(this.getSubscription(e)!==null)throw new Error("Subscription to the channel "+e+" already exists");let i=new je(this,e,n);return this._subs[e]=i,i}getSubscription(e){return this._getSub(e)}removeSubscription(e){e&&(e.state!=="unsubscribed"&&e.unsubscribe(),this._removeSubscription(e))}subscriptions(){return this._subs}ready(e){return this.state==="disconnected"?Promise.reject({code:3,message:"client disconnected"}):this.state==="connected"?Promise.resolve():new Promise((n,i)=>{let s={resolve:n,reject:i};e&&(s.timeout=setTimeout(function(){i({code:1,message:"timeout"})},e)),this._promises[this._nextPromiseId()]=s})}connect(){if(this._isConnected()){this._debug("connect called when already connected");return}if(this._isConnecting()){this._debug("connect called when already connecting");return}this._debug("connect called"),this._reconnectAttempts=0,this._startConnecting()}disconnect(){this._disconnect(0,"disconnect called",!1)}setToken(e){this._token=e}send(e){let n={send:{data:e}},i=this;return this._methodCall().then(function(){return i._transportSendCommands([n])?Promise.resolve():Promise.reject(i._createErrorObject(10,"transport write error"))})}rpc(e,n){let i={rpc:{method:e,data:n}},s=this;return this._methodCall().then(function(){return s._callPromise(i,function(o){return{data:o.rpc.data}})})}publish(e,n){let i={publish:{channel:e,data:n}},s=this;return this._methodCall().then(function(){return s._callPromise(i,function(){return{}})})}history(e,n){let i={history:this._getHistoryRequest(e,n)},s=this;return this._methodCall().then(function(){return s._callPromise(i,function(o){let a=o.history,u=[];if(a.publications)for(let c=0;c<a.publications.length;c++)u.push(s._getPublicationContext(e,a.publications[c]));return{publications:u,epoch:a.epoch||"",offset:a.offset||0}})})}presence(e){let n={presence:{channel:e}},i=this;return this._methodCall().then(function(){return i._callPromise(n,function(s){let o=s.presence.presence;for(let a in o)if(o.hasOwnProperty(a)){let u=o[a].conn_info,c=o[a].chan_info;u&&(o[a].connInfo=u),c&&(o[a].chanInfo=c)}return{clients:o}})})}presenceStats(e){let n={presence_stats:{channel:e}},i=this;return this._methodCall().then(function(){return i._callPromise(n,function(s){let o=s.presence_stats;return{numUsers:o.num_users,numClients:o.num_clients}})})}startBatching(){this._batching=!0}stopBatching(){let e=this;Promise.resolve().then(function(){Promise.resolve().then(function(){e._batching=!1,e._flush()})})}_debug(...e){this._debugEnabled&&wn("debug",e)}_formatOverride(){}_configure(){if(!("Promise"in globalThis))throw new Error("Promise polyfill required");if(!this._endpoint)throw new Error("endpoint configuration required");if(this._config.token!==null&&(this._token=this._config.token),this._config.data!==null&&(this._data=this._config.data),this._codec=new ve,this._formatOverride(),(this._config.debug===!0||typeof localStorage<"u"&&localStorage.getItem("centrifuge.debug"))&&(this._debugEnabled=!0),this._debug("config",this._config),typeof this._endpoint!="string")if(typeof this._endpoint=="object"&&this._endpoint instanceof Array){this._transports=this._endpoint,this._emulation=!0;for(let e in this._transports)if(this._transports.hasOwnProperty(e)){let n=this._transports[e];if(!n.endpoint||!n.transport)throw new Error("malformed transport configuration");let i=n.transport;if(["websocket","http_stream","sse","sockjs","webtransport"].indexOf(i)<0)throw new Error("unsupported transport name: "+i)}}else throw new Error("unsupported url configuration type: only string or array of objects are supported")}_setState(e){if(this.state!==e){this._reconnecting=!1;let n=this.state;return this.state=e,this.emit("state",{newState:e,oldState:n}),!0}return!1}_isDisconnected(){return this.state==="disconnected"}_isConnecting(){return this.state==="connecting"}_isConnected(){return this.state==="connected"}_nextCommandId(){return++this._commandId}_setNetworkEvents(){if(this._networkEventsSet)return;let e=null;this._config.networkEventTarget!==null?e=this._config.networkEventTarget:typeof globalThis.addEventListener<"u"&&(e=globalThis),e&&(e.addEventListener("offline",()=>{this._debug("offline event triggered"),(this.state==="connected"||this.state==="connecting")&&(this._disconnect(1,"transport closed",!0),this._deviceWentOffline=!0)}),e.addEventListener("online",()=>{this._debug("online event triggered"),this.state==="connecting"&&(this._deviceWentOffline&&!this._transportClosed&&(this._deviceWentOffline=!1,this._transportClosed=!0),this._clearReconnectTimeout(),this._startReconnecting())}),this._networkEventsSet=!0)}_getReconnectDelay(){let e=fe(this._reconnectAttempts,this._config.minReconnectDelay,this._config.maxReconnectDelay);return this._reconnectAttempts+=1,e}_clearOutgoingRequests(){for(let e in this._callbacks)if(this._callbacks.hasOwnProperty(e)){let n=this._callbacks[e];clearTimeout(n.timeout);let i=n.errback;if(!i)continue;i({error:this._createErrorObject(11,"connection closed")})}this._callbacks={}}_clearConnectedState(){this._client=null,this._clearServerPingTimeout(),this._clearRefreshTimeout();for(let e in this._subs){if(!this._subs.hasOwnProperty(e))continue;let n=this._subs[e];n.state==="subscribed"&&n._setSubscribing(1,"transport closed")}for(let e in this._serverSubs)this._serverSubs.hasOwnProperty(e)&&this.emit("subscribing",{channel:e})}_handleWriteError(e){for(let n of e){let i=n.id;if(!(i in this._callbacks))continue;let s=this._callbacks[i];clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i];let o=s.errback;o({error:this._createErrorObject(10,"transport write error")})}}_transportSendCommands(e){if(!e.length)return!0;if(!this._transport)return!1;try{this._transport.send(this._codec.encodeCommands(e),this._session,this._node)}catch(n){return this._debug("error writing commands",n),this._handleWriteError(e),!1}return!0}_initializeTransport(){let e;this._config.websocket!==null?e=this._config.websocket:typeof globalThis.WebSocket!="function"&&typeof globalThis.WebSocket!="object"||(e=globalThis.WebSocket);let n=null;this._config.sockjs!==null?n=this._config.sockjs:typeof globalThis.SockJS<"u"&&(n=globalThis.SockJS);let i=null;this._config.eventsource!==null?i=this._config.eventsource:typeof globalThis.EventSource<"u"&&(i=globalThis.EventSource);let s=null;this._config.fetch!==null?s=this._config.fetch:typeof globalThis.fetch<"u"&&(s=globalThis.fetch);let o=null;if(this._config.readableStream!==null?o=this._config.readableStream:typeof globalThis.ReadableStream<"u"&&(o=globalThis.ReadableStream),this._emulation){this._currentTransportIndex>=this._transports.length&&(this._triedAllTransports=!0,this._currentTransportIndex=0);let h=0;for(;;){if(h>=this._transports.length)throw new Error("no supported transport found");let b=this._transports[this._currentTransportIndex],S=b.transport,R=b.endpoint;if(S==="websocket"){if(this._debug("trying websocket transport"),this._transport=new be(R,{websocket:e}),!this._transport.supported()){this._debug("websocket transport not available"),this._currentTransportIndex++,h++;continue}}else if(S==="webtransport"){if(this._debug("trying webtransport transport"),this._transport=new Me(R,{webtransport:globalThis.WebTransport,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("webtransport transport not available"),this._currentTransportIndex++,h++;continue}}else if(S==="http_stream"){if(this._debug("trying http_stream transport"),this._transport=new Fe(R,{fetch:s,readableStream:o,emulationEndpoint:this._config.emulationEndpoint,decoder:this._codec,encoder:this._codec}),!this._transport.supported()){this._debug("http_stream transport not available"),this._currentTransportIndex++,h++;continue}}else if(S==="sse"){if(this._debug("trying sse transport"),this._transport=new Je(R,{eventsource:i,fetch:s,emulationEndpoint:this._config.emulationEndpoint}),!this._transport.supported()){this._debug("sse transport not available"),this._currentTransportIndex++,h++;continue}}else if(S==="sockjs"){if(this._debug("trying sockjs"),this._transport=new Be(R,{sockjs:n,sockjsOptions:this._config.sockjsOptions}),!this._transport.supported()){this._debug("sockjs transport not available"),this._currentTransportIndex++,h++;continue}}else throw new Error("unknown transport "+S);break}}else{if(vn(this._endpoint,"http"))throw new Error("Provide explicit transport endpoints configuration in case of using HTTP (i.e. using array of TransportEndpoint instead of a single string), or use ws(s):// scheme in an endpoint if you aimed using WebSocket transport");if(this._debug("client will use websocket"),this._transport=new be(this._endpoint,{websocket:e}),!this._transport.supported())throw new Error("WebSocket not available")}let a=this,u=this._transport,c=this._nextTransportId();a._debug("id of transport",c);let l=!1,m=!0;this._transport.name()==="sse"&&(m=!1);let w=[];if(this._transport.emulation()){let h=a._sendConnect(!0);if(w.push(h),m){let b=a._sendSubscribeCommands(!0,!0);for(let S in b)b.hasOwnProperty(S)&&w.push(b[S])}}this._setNetworkEvents();let g=this._codec.encodeCommands(w);this._transportClosed=!1;let v;v=setTimeout(function(){u.close()},this._config.timeout),this._transport.initialize(this._codec.name(),{onOpen:function(){if(v&&(clearTimeout(v),v=null),a._transportId!=c){a._debug("open callback from non-actual transport"),u.close();return}l=!0,a._debug(u.subName(),"transport open"),a._transportWasOpen=!0,!u.emulation()&&(a.startBatching(),a._sendConnect(!1),m&&a._sendSubscribeCommands(!0,!1),a.stopBatching())},onError:function(h){if(a._transportId!=c){a._debug("error callback from non-actual transport");return}a._debug("transport level error",h)},onClose:function(h){if(v&&(clearTimeout(v),v=null),a._transportId!=c){a._debug("close callback from non-actual transport");return}a._debug(u.subName(),"transport closed"),a._transportClosed=!0;let b="connection closed",S=!0,R=0;if(h&&"code"in h&&h.code&&(R=h.code),h&&h.reason)try{let ut=JSON.parse(h.reason);b=ut.reason,S=ut.reconnect}catch{b=h.reason,(R>=3500&&R<4e3||R>=4500&&R<5e3)&&(S=!1)}R<3e3?(R===1009?(R=3,b="message size limit exceeded",S=!1):(R=1,b="transport closed"),a._emulation&&!a._transportWasOpen&&(a._currentTransportIndex++,a._currentTransportIndex>=a._transports.length&&(a._triedAllTransports=!0,a._currentTransportIndex=0))):a._transportWasOpen=!0,a._isConnecting()&&!l&&a.emit("error",{type:"transport",error:{code:2,message:"transport closed"},transport:u.name()}),a._reconnecting=!1,a._disconnect(R,b,S)},onMessage:function(h){a._dataReceived(h)}},g)}_sendConnect(e){let n=this._constructConnectCommand(),i=this;return this._call(n,e).then(s=>{let o=s.reply.connect;i._connectResponse(o),s.next&&s.next()},s=>{i._connectError(s.error),s.next&&s.next()}),n}_startReconnecting(){if(this._debug("start reconnecting"),!this._isConnecting()){this._debug("stop reconnecting: client not in connecting state");return}if(this._reconnecting){this._debug("reconnect already in progress, return from reconnect routine");return}if(this._transportClosed===!1){this._debug("waiting for transport close");return}this._reconnecting=!0;let e=this,n=this._token==="";if(!(this._refreshRequired||n&&this._config.getToken!==null)){this._config.getData?this._config.getData().then(function(s){e._isConnecting()&&(e._data=s,e._initializeTransport())}):this._initializeTransport();return}this._getToken().then(function(s){if(e._isConnecting()){if(s==null||s==null){e._failUnauthorized();return}e._token=s,e._debug("connection token refreshed"),e._config.getData?e._config.getData().then(function(o){e._isConnecting()&&(e._data=o,e._initializeTransport())}):e._initializeTransport()}}).catch(function(s){if(!e._isConnecting())return;if(s instanceof W){e._failUnauthorized();return}e.emit("error",{type:"connectToken",error:{code:5,message:s!==void 0?s.toString():""}});let o=e._getReconnectDelay();e._debug("error on connection token refresh, reconnect after "+o+" milliseconds",s),e._reconnecting=!1,e._reconnectTimeout=setTimeout(()=>{e._startReconnecting()},o)})}_connectError(e){this.state==="connecting"&&(e.code===109&&(this._refreshRequired=!0),e.code<100||e.temporary===!0||e.code===109?(this.emit("error",{type:"connect",error:e}),this._debug("closing transport due to connect error"),this._reconnecting=!1,this._disconnect(e.code,e.message,!0)):this._disconnect(e.code,e.message,!1))}_scheduleReconnect(){if(!this._isConnecting())return;let e=!1;this._emulation&&!this._transportWasOpen&&!this._triedAllTransports&&(e=!0);let n=this._getReconnectDelay();e&&(n=0),this._debug("reconnect after "+n+" milliseconds"),this._reconnectTimeout=setTimeout(()=>{this._startReconnecting()},n)}_constructConnectCommand(){let e={};this._token&&(e.token=this._token),this._data&&(e.data=this._data),this._config.name&&(e.name=this._config.name),this._config.version&&(e.version=this._config.version);let n={},i=!1;for(let s in this._serverSubs)if(this._serverSubs.hasOwnProperty(s)&&this._serverSubs[s].recoverable){i=!0;let o={recover:!0};this._serverSubs[s].offset&&(o.offset=this._serverSubs[s].offset),this._serverSubs[s].epoch&&(o.epoch=this._serverSubs[s].epoch),n[s]=o}return i&&(e.subs=n),{connect:e}}_getHistoryRequest(e,n){let i={channel:e};return n!==void 0&&(n.since&&(i.since={offset:n.since.offset},n.since.epoch&&(i.since.epoch=n.since.epoch)),n.limit!==void 0&&(i.limit=n.limit),n.reverse===!0&&(i.reverse=!0)),i}_methodCall(){return this._isConnected()?Promise.resolve():new Promise((e,n)=>{let i=setTimeout(function(){n({code:1,message:"timeout"})},this._config.timeout);this._promises[this._nextPromiseId()]={timeout:i,resolve:e,reject:n}})}_callPromise(e,n){return new Promise((i,s)=>{this._call(e,!1).then(o=>{i(n(o.reply)),o.next&&o.next()},o=>{s(o.error),o.next&&o.next()})})}_dataReceived(e){this._serverPing>0&&this._waitServerPing();let n=this._codec.decodeReplies(e);this._dispatchPromise=this._dispatchPromise.then(()=>{let i;this._dispatchPromise=new Promise(s=>{i=s}),this._dispatchSynchronized(n,i)})}_dispatchSynchronized(e,n){let i=Promise.resolve();for(let s in e)e.hasOwnProperty(s)&&(i=i.then(()=>this._dispatchReply(e[s])));i=i.then(()=>{n()})}_dispatchReply(e){let n,i=new Promise(o=>{n=o});if(e==null)return this._debug("dispatch: got undefined or null reply"),n(),i;let s=e.id;return s&&s>0?this._handleReply(e,n):e.push?this._handlePush(e.push,n):this._handleServerPing(n),i}_call(e,n){return new Promise((i,s)=>{e.id=this._nextCommandId(),this._registerCall(e.id,i,s),n||this._addCommand(e)})}_startConnecting(){this._debug("start connecting"),this._setState("connecting")&&this.emit("connecting",{code:0,reason:"connect called"}),this._client=null,this._startReconnecting()}_disconnect(e,n,i){if(this._isDisconnected())return;let s=this.state,o={code:e,reason:n},a=!1;if(i?a=this._setState("connecting"):(a=this._setState("disconnected"),this._rejectPromises({code:3,message:"disconnected"})),this._clearOutgoingRequests(),s==="connecting"&&this._clearReconnectTimeout(),s==="connected"&&this._clearConnectedState(),a&&(this._isConnecting()?this.emit("connecting",o):this.emit("disconnected",o)),this._transport){this._debug("closing existing transport");let u=this._transport;this._transport=null,u.close(),this._transportClosed=!0,this._nextTransportId()}else this._debug("no transport to close");this._scheduleReconnect()}_failUnauthorized(){this._disconnect(1,"unauthorized",!1)}_getToken(){if(this._debug("get connection token"),!this._config.getToken)throw this.emit("error",{type:"configuration",error:{code:12,message:"token expired but no getToken function set in the configuration"}}),new W("");return this._config.getToken({})}_refresh(){let e=this._client,n=this;this._getToken().then(function(i){if(e!==n._client)return;if(!i){n._failUnauthorized();return}if(n._token=i,n._debug("connection token refreshed"),!n._isConnected())return;let s={refresh:{token:n._token}};n._call(s,!1).then(o=>{let a=o.reply.refresh;n._refreshResponse(a),o.next&&o.next()},o=>{n._refreshError(o.error),o.next&&o.next()})}).catch(function(i){if(n._isConnected()){if(i instanceof W){n._failUnauthorized();return}n.emit("error",{type:"refreshToken",error:{code:6,message:i!==void 0?i.toString():""}}),n._refreshTimeout=setTimeout(()=>n._refresh(),n._getRefreshRetryDelay())}})}_refreshError(e){e.code<100||e.temporary===!0?(this.emit("error",{type:"refresh",error:e}),this._refreshTimeout=setTimeout(()=>this._refresh(),this._getRefreshRetryDelay())):this._disconnect(e.code,e.message,!1)}_getRefreshRetryDelay(){return fe(0,5e3,1e4)}_refreshResponse(e){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),e.expires&&(this._client=e.client,this._refreshTimeout=setTimeout(()=>this._refresh(),he(e.ttl)))}_removeSubscription(e){e!==null&&delete this._subs[e.channel]}_unsubscribe(e){if(!this._isConnected())return;let i={unsubscribe:{channel:e.channel}},s=this;this._call(i,!1).then(o=>{o.next&&o.next()},o=>{o.next&&o.next(),s._disconnect(4,"unsubscribe error",!0)})}_getSub(e){let n=this._subs[e];return n||null}_isServerSub(e){return this._serverSubs[e]!==void 0}_sendSubscribeCommands(e,n){let i=[];for(let s in this._subs){if(!this._subs.hasOwnProperty(s))continue;let o=this._subs[s];if(o._inflight!==!0&&o.state==="subscribing"){let a=o._subscribe(e,n);a&&i.push(a)}}return i}_connectResponse(e){if(this._transportWasOpen=!0,this._reconnectAttempts=0,this._refreshRequired=!1,this._isConnected())return;this._client=e.client,this._setState("connected"),this._refreshTimeout&&clearTimeout(this._refreshTimeout),e.expires&&(this._refreshTimeout=setTimeout(()=>this._refresh(),he(e.ttl))),this._session=e.session,this._node=e.node,this.startBatching(),this._sendSubscribeCommands(!1,!1),this.stopBatching();let n={client:e.client,transport:this._transport.subName()};e.data&&(n.data=e.data),this.emit("connected",n),this._resolvePromises(),this._processServerSubs(e.subs||{}),e.ping&&e.ping>0?(this._serverPing=e.ping*1e3,this._sendPong=e.pong===!0,this._waitServerPing()):this._serverPing=0}_processServerSubs(e){for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];this._serverSubs[n]={offset:i.offset,epoch:i.epoch,recoverable:i.recoverable||!1};let s=this._getSubscribeContext(n,i);this.emit("subscribed",s)}for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];if(i.recovered){let s=i.publications;if(s&&s.length>0)for(let o in s)s.hasOwnProperty(o)&&this._handlePublication(n,s[o])}}for(let n in this._serverSubs)this._serverSubs.hasOwnProperty(n)&&(e[n]||(this.emit("unsubscribed",{channel:n}),delete this._serverSubs[n]))}_clearRefreshTimeout(){this._refreshTimeout!==null&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null)}_clearReconnectTimeout(){this._reconnectTimeout!==null&&(clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null)}_clearServerPingTimeout(){this._serverPingTimeout!==null&&(clearTimeout(this._serverPingTimeout),this._serverPingTimeout=null)}_waitServerPing(){this._config.maxServerPingDelay!==0&&this._isConnected()&&(this._clearServerPingTimeout(),this._serverPingTimeout=setTimeout(()=>{this._isConnected()&&this._disconnect(2,"no ping",!0)},this._serverPing+this._config.maxServerPingDelay))}_getSubscribeContext(e,n){let i={channel:e,positioned:!1,recoverable:!1,wasRecovering:!1,recovered:!1};n.recovered&&(i.recovered=!0),n.positioned&&(i.positioned=!0),n.recoverable&&(i.recoverable=!0),n.was_recovering&&(i.wasRecovering=!0);let s="";"epoch"in n&&(s=n.epoch);let o=0;return"offset"in n&&(o=n.offset),(i.positioned||i.recoverable)&&(i.streamPosition={offset:o,epoch:s}),n.data&&(i.data=n.data),i}_handleReply(e,n){let i=e.id;if(!(i in this._callbacks)){n();return}let s=this._callbacks[i];if(clearTimeout(this._callbacks[i].timeout),delete this._callbacks[i],Sn(e)){let o=s.errback;if(!o){n();return}let a=e.error;o({error:a,next:n})}else{let o=s.callback;if(!o)return;o({reply:e,next:n})}}_handleJoin(e,n){let i=this._getSub(e);if(!i){if(this._isServerSub(e)){let s={channel:e,info:this._getJoinLeaveContext(n.info)};this.emit("join",s)}return}i._handleJoin(n)}_handleLeave(e,n){let i=this._getSub(e);if(!i){if(this._isServerSub(e)){let s={channel:e,info:this._getJoinLeaveContext(n.info)};this.emit("leave",s)}return}i._handleLeave(n)}_handleUnsubscribe(e,n){let i=this._getSub(e);if(!i){this._isServerSub(e)&&(delete this._serverSubs[e],this.emit("unsubscribed",{channel:e}));return}n.code<2500?i._setUnsubscribed(n.code,n.reason,!1):i._setSubscribing(n.code,n.reason)}_handleSubscribe(e,n){this._serverSubs[e]={offset:n.offset,epoch:n.epoch,recoverable:n.recoverable||!1},this.emit("subscribed",this._getSubscribeContext(e,n))}_handleDisconnect(e){let n=e.code,i=!0;(n>=3500&&n<4e3||n>=4500&&n<5e3)&&(i=!1),this._disconnect(n,e.reason,i)}_getPublicationContext(e,n){let i={channel:e,data:n.data};return n.offset&&(i.offset=n.offset),n.info&&(i.info=this._getJoinLeaveContext(n.info)),n.tags&&(i.tags=n.tags),i}_getJoinLeaveContext(e){let n={client:e.client,user:e.user};return e.conn_info&&(n.connInfo=e.conn_info),e.chan_info&&(n.chanInfo=e.chan_info),n}_handlePublication(e,n){let i=this._getSub(e);if(!i){if(this._isServerSub(e)){let s=this._getPublicationContext(e,n);this.emit("publication",s),n.offset!==void 0&&(this._serverSubs[e].offset=n.offset)}return}i._handlePublication(n)}_handleMessage(e){this.emit("message",{data:e.data})}_handleServerPing(e){if(this._sendPong){let n={};this._transportSendCommands([n])}e()}_handlePush(e,n){let i=e.channel;e.pub?this._handlePublication(i,e.pub):e.message?this._handleMessage(e.message):e.join?this._handleJoin(i,e.join):e.leave?this._handleLeave(i,e.leave):e.unsubscribe?this._handleUnsubscribe(i,e.unsubscribe):e.subscribe?this._handleSubscribe(i,e.subscribe):e.disconnect&&this._handleDisconnect(e.disconnect),n()}_flush(){let e=this._commands.slice(0);this._commands=[],this._transportSendCommands(e)}_createErrorObject(e,n,i){let s={code:e,message:n};return i&&(s.temporary=!0),s}_registerCall(e,n,i){this._callbacks[e]={callback:n,errback:i,timeout:null},this._callbacks[e].timeout=setTimeout(()=>{delete this._callbacks[e],dt(i)&&i({error:this._createErrorObject(1,"timeout")})},this._config.timeout)}_addCommand(e){this._batching?this._commands.push(e):this._transportSendCommands([e])}_nextPromiseId(){return++this._promiseId}_nextTransportId(){return++this._transportId}_resolvePromises(){for(let e in this._promises)this._promises.hasOwnProperty(e)&&(this._promises[e].timeout&&clearTimeout(this._promises[e].timeout),this._promises[e].resolve(),delete this._promises[e])}_rejectPromises(e){for(let n in this._promises)this._promises.hasOwnProperty(n)&&(this._promises[n].timeout&&clearTimeout(this._promises[n].timeout),this._promises[n].reject(e),delete this._promises[n])}};ie.SubscriptionState=Ie;ie.State=Ne;ie.UnauthorizedError=W;var re=lt(ci());var un={};_i(un,{default:()=>vs,nested:()=>bs});var bs={centrifugal:{nested:{centrifuge:{nested:{protocol:{options:{go_package:"./;protocol"},nested:{Error:{fields:{code:{type:"uint32",id:1},message:{type:"string",id:2},temporary:{type:"bool",id:3}}},EmulationRequest:{fields:{node:{type:"string",id:1},session:{type:"string",id:2},data:{type:"bytes",id:3}}},Command:{fields:{id:{type:"uint32",id:1},connect:{type:"ConnectRequest",id:4},subscribe:{type:"SubscribeRequest",id:5},unsubscribe:{type:"UnsubscribeRequest",id:6},publish:{type:"PublishRequest",id:7},presence:{type:"PresenceRequest",id:8},presence_stats:{type:"PresenceStatsRequest",id:9},history:{type:"HistoryRequest",id:10},ping:{type:"PingRequest",id:11},send:{type:"SendRequest",id:12},rpc:{type:"RPCRequest",id:13},refresh:{type:"RefreshRequest",id:14},sub_refresh:{type:"SubRefreshRequest",id:15}},reserved:[[2,2],[3,3]]},Reply:{fields:{id:{type:"uint32",id:1},error:{type:"Error",id:2},push:{type:"Push",id:4},connect:{type:"ConnectResult",id:5},subscribe:{type:"SubscribeResult",id:6},unsubscribe:{type:"UnsubscribeResult",id:7},publish:{type:"PublishResult",id:8},presence:{type:"PresenceResult",id:9},presence_stats:{type:"PresenceStatsResult",id:10},history:{type:"HistoryResult",id:11},ping:{type:"PingResult",id:12},rpc:{type:"RPCResult",id:13},refresh:{type:"RefreshResult",id:14},sub_refresh:{type:"SubRefreshResult",id:15}},reserved:[[3,3]]},Push:{fields:{channel:{type:"string",id:2},pub:{type:"Publication",id:4},join:{type:"Join",id:5},leave:{type:"Leave",id:6},unsubscribe:{type:"Unsubscribe",id:7},message:{type:"Message",id:8},subscribe:{type:"Subscribe",id:9},connect:{type:"Connect",id:10},disconnect:{type:"Disconnect",id:11},refresh:{type:"Refresh",id:12}},reserved:[[1,1],[3,3]]},ClientInfo:{fields:{user:{type:"string",id:1},client:{type:"string",id:2},conn_info:{type:"bytes",id:3},chan_info:{type:"bytes",id:4}}},Publication:{fields:{data:{type:"bytes",id:4},info:{type:"ClientInfo",id:5},offset:{type:"uint64",id:6},tags:{keyType:"string",type:"string",id:7}},reserved:[[1,1],[2,2],[3,3]]},Join:{fields:{info:{type:"ClientInfo",id:1}}},Leave:{fields:{info:{type:"ClientInfo",id:1}}},Unsubscribe:{fields:{code:{type:"uint32",id:2},reason:{type:"string",id:3}},reserved:[[1,1]]},Subscribe:{fields:{recoverable:{type:"bool",id:1},epoch:{type:"string",id:4},offset:{type:"uint64",id:5},positioned:{type:"bool",id:6},data:{type:"bytes",id:7}},reserved:[[2,2],[3,3]]},Message:{fields:{data:{type:"bytes",id:1}}},Connect:{fields:{client:{type:"string",id:1},version:{type:"string",id:2},data:{type:"bytes",id:3},subs:{keyType:"string",type:"SubscribeResult",id:4},expires:{type:"bool",id:5},ttl:{type:"uint32",id:6},ping:{type:"uint32",id:7},pong:{type:"bool",id:8},session:{type:"string",id:9},node:{type:"string",id:10}}},Disconnect:{fields:{code:{type:"uint32",id:1},reason:{type:"string",id:2},reconnect:{type:"bool",id:3}}},Refresh:{fields:{expires:{type:"bool",id:1},ttl:{type:"uint32",id:2}}},ConnectRequest:{fields:{token:{type:"string",id:1},data:{type:"bytes",id:2},subs:{keyType:"string",type:"SubscribeRequest",id:3},name:{type:"string",id:4},version:{type:"string",id:5}}},ConnectResult:{fields:{client:{type:"string",id:1},version:{type:"string",id:2},expires:{type:"bool",id:3},ttl:{type:"uint32",id:4},data:{type:"bytes",id:5},subs:{keyType:"string",type:"SubscribeResult",id:6},ping:{type:"uint32",id:7},pong:{type:"bool",id:8},session:{type:"string",id:9},node:{type:"string",id:10}}},RefreshRequest:{fields:{token:{type:"string",id:1}}},RefreshResult:{fields:{client:{type:"string",id:1},version:{type:"string",id:2},expires:{type:"bool",id:3},ttl:{type:"uint32",id:4}}},SubscribeRequest:{fields:{channel:{type:"string",id:1},token:{type:"string",id:2},recover:{type:"bool",id:3},epoch:{type:"string",id:6},offset:{type:"uint64",id:7},data:{type:"bytes",id:8},positioned:{type:"bool",id:9},recoverable:{type:"bool",id:10},join_leave:{type:"bool",id:11}},reserved:[[4,4],[5,5]]},SubscribeResult:{fields:{expires:{type:"bool",id:1},ttl:{type:"uint32",id:2},recoverable:{type:"bool",id:3},epoch:{type:"string",id:6},publications:{rule:"repeated",type:"Publication",id:7},recovered:{type:"bool",id:8},offset:{type:"uint64",id:9},positioned:{type:"bool",id:10},data:{type:"bytes",id:11},was_recovering:{type:"bool",id:12}},reserved:[[4,4],[5,5]]},SubRefreshRequest:{fields:{channel:{type:"string",id:1},token:{type:"string",id:2}}},SubRefreshResult:{fields:{expires:{type:"bool",id:1},ttl:{type:"uint32",id:2}}},UnsubscribeRequest:{fields:{channel:{type:"string",id:1}}},UnsubscribeResult:{fields:{}},PublishRequest:{fields:{channel:{type:"string",id:1},data:{type:"bytes",id:2}}},PublishResult:{fields:{}},PresenceRequest:{fields:{channel:{type:"string",id:1}}},PresenceResult:{fields:{presence:{keyType:"string",type:"ClientInfo",id:1}}},PresenceStatsRequest:{fields:{channel:{type:"string",id:1}}},PresenceStatsResult:{fields:{num_clients:{type:"uint32",id:1},num_users:{type:"uint32",id:2}}},StreamPosition:{fields:{offset:{type:"uint64",id:1},epoch:{type:"string",id:2}}},HistoryRequest:{fields:{channel:{type:"string",id:1},limit:{type:"int32",id:7},since:{type:"StreamPosition",id:8},reverse:{type:"bool",id:9}},reserved:[[2,2],[3,3],[4,4],[5,5],[6,6]]},HistoryResult:{fields:{publications:{rule:"repeated",type:"Publication",id:1},epoch:{type:"string",id:2},offset:{type:"uint64",id:3}}},PingRequest:{fields:{}},PingResult:{fields:{}},RPCRequest:{fields:{data:{type:"bytes",id:1},method:{type:"string",id:2}}},RPCResult:{fields:{data:{type:"bytes",id:1}}},SendRequest:{fields:{data:{type:"bytes",id:1}}}}}}}}}},vs={nested:bs};var cn=re.Root.fromJSON(un),ws=cn.lookupType("protocol.Command"),fi=cn.lookupType("protocol.Reply"),Ss=cn.lookupType("protocol.EmulationRequest"),ot=class{name(){return"protobuf"}encodeEmulationRequest(t){let e=re.Writer.create();return Ss.encode(t,e),e.finish()}encodeCommands(t){let e=re.Writer.create();for(let n in t)if(t.hasOwnProperty(n)){let i=Object.assign({},t[n]);ws.encodeDelimited(i,e)}return e.finish()}decodeReplies(t){let e=[],n=re.Reader.create(new Uint8Array(t));for(;n.pos<n.len;){let i=fi.decodeDelimited(n);e.push(i)}return e}decodeReply(t){let e=re.Reader.create(new Uint8Array(t));for(;e.pos<e.len;)return fi.decodeDelimited(e),{ok:!0,pos:e.pos};return{ok:!1}}};var at=class extends ie{_formatOverride(){this._codec=new ot}};window.Centrifuge=at;})();
//# sourceMappingURL=centrifuge.protobuf.js.map
